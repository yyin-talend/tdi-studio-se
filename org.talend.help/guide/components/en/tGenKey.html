<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tGenKey</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-dataquality.html" title="Chapter&nbsp;6.&nbsp;Data Quality components"><link rel="prev" href="tFuzzyUniqRow.html" title="tFuzzyUniqRow"><link rel="next" href="tGenKeyHadoop.html" title="tGenKeyHadoop"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tGenKey</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tFuzzyUniqRow.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Data Quality components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tGenKeyHadoop.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tGenKey"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tGenKey"></a>tGenKey</h2></div></div></div><div class="mediaobject"><img src="../images/tWindowKey_icon32_white.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This component will be available in the <span class="emphasis"><strong>Palette</strong></span> of
			the studio on the condition that you have subscribed to any <span class="emphasis"><em>Talend Platform</em></span> product.</p></div><div class="section" title="tGenKey properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e91175"></a>tGenKey properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Component family</strong></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Data Quality</p>
                                                </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Function</strong></span>
                                                  </p>
                                                </td><td colspan="2" valign="top">
                                                  <p><span class="emphasis"><strong>tGenKey
                                                  </strong></span>enables you to apply several kinds of
                                                  algorithms on each input column and use the
                                                  computed results to generate a functional key.
                                                  These algorithms can be key or optional
                                                  algorithms.</p>
                                                  <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The values returned by the key algorithms
                                                  will be concatenated, according to the column
                                                  order in the <span class="emphasis"><strong>Key
                                                  composition</strong></span> table.</p></div>
                                                </td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Purpose</strong></span>
                                                  </p>
                                                </td><td colspan="2" valign="top">
                                                  <p><span class="emphasis"><strong>tGenKey
                                                  </strong></span>generates a functional key from the
                                                  input columns, by applying different types of
                                                  algorithms on each column and grouping the
                                                  computed results in one key. It outputs this key
                                                  together with the input columns. </p>
                                                  <p> This component helps, using the generated
                                                  functional key, to narrow down your data
                                                  filter/matching results for example.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Basic settings</strong></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Schema</em></span> and
                                                  <span class="emphasis"><em>Edit schema</em></span></p>
                                                </td><td valign="top">
                                                  <p>A schema is a row description, i.e., it
                                                  defines the number of fields that will be
                                                  processed and passed on to the next component. The
                                                  schema is either built-in or remote in the
                                                  Repository.</p>
                                                  <p> Click <span class="emphasis"><strong>Sync
                                                  columns</strong></span> to retrieve the schema from the
                                                  previous component in the Job.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><strong>Built-in</strong></span>:
                                                  You create and store the schema locally for this
                                                  component only. Related topic: see <span class="emphasis"><em>Talend Data Integration Studio
                                                  User Guide</em></span>.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><strong>Repository</strong></span>:
                                                  You have already created and stored the schema in
                                                  the Repository. You can reuse it in other projects
                                                  and job designs. Related topic: see <span class="emphasis"><em>Talend Data Integration Studio
                                                  User Guide</em></span>.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Algorithm</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Column</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Select the column(s) from the main flow on
                                                  which you want to define certain algorithms to set
                                                  the functional key.</p>
                                                  <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When you select a date column on which to apply an algorithm or a matching algorithm,
			you can decide what to compare in the date format.</p><p>For example, if you want to only compare the year in the date, in the component schema
			set the type of the date column to <span class="emphasis"><strong>Date</strong></span> and then enter
				"<span class="emphasis"><em>yyyy</em></span>" in the <span class="emphasis"><strong>Date
				Pattern</strong></span> field. The component then converts the date format to a string
			according to the pattern defined in the schema before starting a string
			comparison.</p></div>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Pre-Algorithm</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>If required, select the relevant matching
                                                  algorithm from the list:</p>
                                                  <p>
                                                  <span class="emphasis"><strong>remove diacritical
                                                  marks:</strong></span>removes any diacritical
                                                  mark.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>remove diacritical marks and
                                                  lower case</strong></span>: removes any diacritical
                                                  mark and converts to lower case before generating
                                                  the code of the column.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>remove diacritical marks and
                                                  upper case: </strong></span>removes any diacritical
                                                  mark and converts to upper case before generating
                                                  the code of the column.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>lower case</strong></span>:
                                                  converts the field to lower case before applying
                                                  the key algorithm.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>upper case</strong></span>:
                                                  converts the field to upper case before applying
                                                  the key algorithm.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>add left position
                                                  character</strong></span>: enables you to add a
                                                  character to the left of the column. </p>
                                                  <p>
                                                  <span class="emphasis"><strong>add right position
                                                  character</strong></span>: enables you to add a
                                                  character to the right of the column.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Value</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Set the algorithm value, where
                                                  applicable.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Algorithm</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Select the relevant algorithm from the
                                                  list:</p>
                                                  <p>
                                                  <span class="emphasis"><strong>first character of each
                                                  word</strong></span>: includes in the functional key
                                                  the first character of each word in the
                                                  column.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>N first characters of each
                                                  word</strong></span>: includes in the functional key N
                                                  first characters of each word in the column. </p>
                                                  <p>
                                                  <span class="emphasis"><strong>first N characters of the
                                                  string</strong></span>: includes in the functional key
                                                  N first characters of the string.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>last N characters of the
                                                  string</strong></span>: includes in the functional key
                                                  N last characters of the string.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>first N consonants of the
                                                  string</strong></span>: includes in the functional key
                                                  N first consonants of the string.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>first N vowels of the
                                                  string:</strong></span> includes in the functional key
                                                  N first vowels of the string.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>pick characters</strong></span>:
                                                  includes in the functional key the characters
                                                  located at a fixed position (corresponding to the
                                                  set digital/range).</p>
                                                  <p>
                                                  <span class="emphasis"><strong>exact</strong></span>: includes
                                                  in the functional key the full string.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>substring(a,b)</strong></span>:
                                                  includes in the functional key character according
                                                  to the set index.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>soundex code</strong></span>:
                                                  generates a code according to a standard English
                                                  phonetic algorithm. This code represents the
                                                  character string that will be included in the
                                                  functional key. </p>
                                                  <p>
                                                  <span class="emphasis"><strong>metaphone code</strong></span>:
                                                  generates a code according to the character
                                                  pronunciation. This code represents the character
                                                  string that will be included in the functional
                                                  key. </p>
                                                  <p>
                                                  <span class="emphasis"><strong>double-metaphone
                                                  code</strong></span>: generates a code according to the
                                                  character pronunciation using a new version of the
                                                  Metaphone phonetic algorithm, that produces more
                                                  accurate results than the original algorithm. This
                                                  code represents the character string that will be
                                                  included in the functional key.</p>
                                                  <p><span class="emphasis"><strong>fingerPrintkey</strong></span>: generates the
                                                  functional key from a string value through the
                                                  following sequential process:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>remove leading and trailing
                                                  whitespace,</p></li><li class="listitem"><p>change all characters to their lowercase
                                                  representation,</p></li><li class="listitem"><p>remove all punctuation and control
                                                  characters,</p></li><li class="listitem"><p>split the string into whitespace-separated
                                                  tokens,</p></li><li class="listitem"><p>sort the tokens and remove
                                                  duplicates,</p></li><li class="listitem"><p>join the tokens back together,</p><p>Because the string parts are sorted, the
                                                  given order of tokens does not matter. So,
                                                  <span class="emphasis"><em>Cruise, Tom</em></span> and <span class="emphasis"><em>Tom
                                                  Cruise</em></span> both end up with a fingerprint
                                                  <span class="emphasis"><em>cruise tom</em></span> and therefore end
                                                  up in the same cluster.</p></li><li class="listitem"><p>normalize extended western characters to
                                                  their ASCII representation, for example
                                                  <span class="emphasis"><em>g&ouml;del</em></span> to
                                                  <span class="emphasis"><em>godel</em></span>.</p><p>This reproduce data entry mistakes performed
                                                  when entering extended characters with an
                                                  ASCII-only keyboard. However, this procedure can
                                                  also lead to false positives, for example
                                                  <span class="emphasis"><em>g&ouml;del</em></span> and
                                                  <span class="emphasis"><em>god&eacute;l</em></span> would both end up with
                                                  <span class="emphasis"><em>godel</em></span> as their fingerprint
                                                  but they are likely to be different names. So this
                                                  might work less effectively for datasets where
                                                  extended characters play substantial
                                                  differentiation role.</p></li></ol></div>
                                                  <p><span class="emphasis"><strong>nGramkey</strong></span>:
                                                  this algorithm is similar to the <span class="emphasis"><strong>fingerPrintkey</strong></span> method
                                                  described above. But instead of using whitespace
                                                  separated tokens, it uses n-grams, where the
                                                  <span class="emphasis"><em>n</em></span> can be specified by the
                                                  user. This method generates the functional key
                                                  from a string value through the following
                                                  sequential process:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>change all characters to their lowercase
                                                  representation,</p></li><li class="listitem"><p>remove all punctuation and control
                                                  characters,</p></li><li class="listitem"><p>obtain all the string n-grams, </p></li><li class="listitem"><p>sort the n-grams and remove
                                                  duplicates,</p></li><li class="listitem"><p>join the sorted n-grams back
                                                  together,</p></li><li class="listitem"><p>normalize extended western characters to
                                                  their ASCII representation, for example
                                                  <span class="emphasis"><em>g&ouml;del</em></span> to
                                                  <span class="emphasis"><em>godel</em></span>.</p><p>For example, the 2-gram fingerprint of
                                                  <span class="emphasis"><em>Paris</em></span> is
                                                  <span class="emphasis"><em>arispari</em></span> and the 1-gram
                                                  fingerprint is <span class="emphasis"><em>aiprs</em></span>. </p><p>The delivered implementation of this
                                                  algorithm is 2-grams.</p></li></ol></div>
                                                  <p><span class="emphasis"><strong>colognPhonetic</strong></span>: a soundex phonetic
                                                  algorithm optimized for the German language. It
                                                  encodes a string into a Cologne phonetic value.
                                                  This code represents the character string that
                                                  will be included in the functional key.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Value</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Set the algorithm value, where
                                                  applicable.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Post-Algorithm</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>If required, select the relevant matching
                                                  algorithm from the list:</p>
                                                  <p>
                                                  <span class="emphasis"><strong>use default value</strong></span>
                                                  (string): enables you to choose a string to
                                                  replace null or empty data.</p>
                                                  <p>
                                                  <span class="emphasis"><strong>add left position
                                                  character</strong></span>: enables you to add a
                                                  character to the left of the column. </p>
                                                  <p>
                                                  <span class="emphasis"><strong>add right position
                                                  character</strong></span>: enables you to add a
                                                  character to the right of the column.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Value</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Set the option value, where
                                                  applicable.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>Show help</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Select this check box to display
                                                  instructions on how to set algorithms/options
                                                  parameters.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Advanced settings</strong></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><em>tStat</em></span>
                                                  <span class="emphasis"><em>Catcher</em></span>
                                                  <span class="emphasis"><em>Statistics</em></span>
                                                  </p>
                                                </td><td valign="top">
                                                  <p>Select this check box to collect log data at
                                                  the component level.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Usage</strong></span>
                                                  </p>
                                                </td><td colspan="2" valign="top">
                                                  <p>This component is an intermediary step. It
                                                  requires an input flow as well as an output. This
                                                  component can be used with other components, such
                                                  as <span class="emphasis"><strong>tMatchGroup</strong></span>,
                                                  in order to create a blocking key.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p>
                                                  <span class="emphasis"><strong>Limitation/prerequisite</strong></span>
                                                  </p>
                                                </td><td colspan="2" valign="top">
                                                  <p>n/a</p>
                                                </td></tr></tbody></table></div></div><div class="section" title="Scenario&nbsp;1: Generating functional keys in the output flow"><div class="titlepage"><div><div><h3 class="title"><a name="Raa55888"></a>Scenario&nbsp;1: Generating functional keys in the output flow</h3></div></div></div><p>This three-component scenario describes a basic Job that generates a
                        functional key for each of the data records using one algorithm on one of
                        the input columns, <span class="emphasis"><em>PostalCode</em></span>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This functional key can be used in different ways to narrow down the
                                results of data filtering or data matching, for example. So
                                        the<span class="emphasis"><strong> tGenKey</strong></span> component can
                                be used with so many other data quality and data integration
                                components to form different useful use cases. For an example of one
                                use case of <span class="emphasis"><strong>tGenKey</strong></span>, see <a class="xref" href="tGenKey.html#Raa99658" title="Scenario&nbsp;2: Comparing columns and grouping in the output flow duplicate records that have the same functional key">the section called &#8220;Scenario&nbsp;2: Comparing columns and grouping in the output flow duplicate
                        records that have the same functional key&#8221;</a>.</p></div><p>In this scenario, the input data flow has four columns:
                                <span class="emphasis"><em>Firstname</em></span>, <span class="emphasis"><em>Lastname</em></span>,
                                <span class="emphasis"><em>DOB</em></span> (date of birth), and
                                <span class="emphasis"><em>PostalCode</em></span>. This data has problems such as
                        duplication, first or last names spelled differently or wrongly, different
                        information for the same customer, etc. This scenario generates a functional
                        key for each data record using an algorithm that concatenates the first two
                        characters of the postal code.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e91818"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design
                                                workspace: <span class="emphasis"><strong>tFixedFlowInput</strong></span>, <span class="emphasis"><strong>tGenKey</strong></span> and <span class="emphasis"><strong>tLogRow</strong></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey1.png"></div></li><li class="step" title="Step 2"><p>Connect all the components together using the
                                                  <span class="emphasis"><strong>Main </strong></span>link.</p></li></ol></div></div><div class="section" title="Configuring the data input"><div class="titlepage"><div><div><h4 class="title"><a name="d0e91846"></a>Configuring the data input</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tFixedFlowInput</strong></span> to display the
                                                  <span class="emphasis"><strong>Basic settings</strong></span>
                                                view and define the component properties.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey2.png"></div></li><li class="step" title="Step 2"><p>Click the <span class="emphasis"><strong>[...]</strong></span>
                                                button next to <span class="emphasis"><strong>Edit
                                                  Schema</strong></span> to open the <span class="emphasis"><strong>[Schema]</strong></span> dialog box.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey3.png"></div></li><li class="step" title="Step 3"><p>Click the plus button to add as many lines as needed
                                                for the input schema you want to create from
                                                internal variables. </p><p> In this example, the schema is made of four columns:
                                                  <span class="emphasis"><em>Firstnam</em></span>,
                                                  <span class="emphasis"><em>Lastname</em></span>,
                                                  <span class="emphasis"><em>DOB</em></span> and
                                                  <span class="emphasis"><em>PostalCode</em></span>.</p><p>Then, click <span class="emphasis"><strong>OK</strong></span> to
                                                close the dialog box.</p></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Mode</strong></span> area,
                                                select the <span class="emphasis"><strong>Use Inline
                                                  Table</strong></span> option.</p><p> The <span class="emphasis"><strong>Value</strong></span> table
                                                displays as <span class="emphasis"><strong>Inline
                                                  Table</strong></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey4.png"></div></li><li class="step" title="Step 5"><p>Click the plus button to add as many line as needed
                                                and then click in each of the lines to define the
                                                input data for the four columns.</p></li></ol></div></div><div class="section" title="Configuring key generation"><div class="titlepage"><div><div><h4 class="title"><a name="d0e91922"></a>Configuring key generation</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tGenKey</strong></span>
                                                to display the <span class="emphasis"><strong>Basic
                                                  settings</strong></span> view and define the component
                                                properties.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey6.png"></div></li><li class="step" title="Step 2"><p>Under the <span class="emphasis"><strong>Algorithm</strong></span>
                                                table, click the plus button to add a row in this
                                                table.</p></li><li class="step" title="Step 3"><p>On the <span class="emphasis"><strong>column</strong></span> column,
                                                click the newly added row and select from the list
                                                the column you want to process using an algorithm.
                                                In this example, select
                                                  <span class="emphasis"><em>PostalCode</em></span>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When you select a date column on which to apply an algorithm or a matching algorithm,
			you can decide what to compare in the date format.</p><p>For example, if you want to only compare the year in the date, in the component schema
			set the type of the date column to <span class="emphasis"><strong>Date</strong></span> and then enter
				"<span class="emphasis"><em>yyyy</em></span>" in the <span class="emphasis"><strong>Date
				Pattern</strong></span> field. The component then converts the date format to a string
			according to the pattern defined in the schema before starting a string
			comparison.</p></div></li><li class="step" title="Step 4"><p>On the <span class="emphasis"><strong>algorithm</strong></span>
                                                column, click the newly added row and select from
                                                the list the algorithm you want to apply to the
                                                corresponding column. In this example, select
                                                  <span class="emphasis"><strong>first N characters of the
                                                  string</strong></span>.</p></li><li class="step" title="Step 5"><p>Click in the <span class="emphasis"><strong>Value</strong></span>
                                                column and enter the value for the selected
                                                algorithm, when needed. In this scenario, type in
                                                  <span class="emphasis"><em>2</em></span>.</p><p>In this example, we want to generate a functional key
                                                that holds the first two characters of the postal
                                                code for each of the data rows and we do not want to
                                                define any extra options on these columns.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can select the <span class="emphasis"><strong>Show
                                                  help</strong></span> check box to display instructions
                                                  on how to set algorithms/options
                                                  parameters.</p></div><p>Once you have defined the <span class="emphasis"><strong>tGenKey</strong></span> properties, you can display a
                                                statistical view of these parameters. To do
                                                so:</p></li><li class="step" title="Step 6"><p> Right-click the <span class="emphasis"><strong>tGenKey</strong></span> component and select <span class="emphasis"><strong>View Key Profile</strong></span> in the
                                                contextual menu.</p><p>The <span class="emphasis"><strong>View Key Profile</strong></span>
                                                editor displays, allowing you to visualize the
                                                statistics regarding the number of rows per block
                                                and to adapt them according to the results you want
                                                to get.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When you are processing a large amount of data
                                                  and when this component is used to partition data
                                                  in order to use them in a matching component (such
                                                  as <span class="emphasis"><strong>tRecordMatching</strong></span> or <span class="emphasis"><strong>tMatchGroup</strong></span>), it is
                                                  preferable to have a limited number of rows in one
                                                  block. An amount of about 50 rows per block is
                                                  considered optimal, but it depends on the number
                                                  of fields to compare, the total number of rows and
                                                  the time considered acceptable for data
                                                  processing.</p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For a use example of the <span class="emphasis"><strong>View Key Profile</strong></span> option, see <a class="xref" href="tGenKey.html#Raa99658" title="Scenario&nbsp;2: Comparing columns and grouping in the output flow duplicate records that have the same functional key">the section called &#8220;Scenario&nbsp;2: Comparing columns and grouping in the output flow duplicate
                        records that have the same functional key&#8221;</a>.</p></div></li></ol></div></div><div class="section" title="Configuring the console output"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92029"></a>Configuring the console output</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p> Double-click the <span class="emphasis"><strong>tLogRow
                                                </strong></span>component to display the <span class="emphasis"><strong>Basic settings</strong></span> view.</p></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Mode</strong></span> area,
                                                select <span class="emphasis"><strong>Table</strong></span> to
                                                display the Job execution result in table cells.
                                        </p></li></ol></div><div class="mediaobject"><img src="../images/Use_Case_tBlockedFuzzyJoin5.png"></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92054"></a>Executing the Job</h4></div></div></div><div class="procedure"><ul class="procedure"><li class="step" title="Step 1"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute it.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey8.png"></div><p>All the output columns including the
                                                  <span class="emphasis"><em>T_GEN_KEY</em></span> column are listed
                                                in the <span class="emphasis"><strong>Run</strong></span> console.
                                                The functional key for each data record is
                                                concatenated from the first two characters of the
                                                corresponding value in the <span class="emphasis"><em>PostalCode
                                                </em></span>column.</p></li></ul></div></div></div><div class="section" title="Scenario&nbsp;2: Comparing columns and grouping in the output flow duplicate records that have the same functional key"><div class="titlepage"><div><div><h3 class="title"><a name="Raa99658"></a>Scenario&nbsp;2: Comparing columns and grouping in the output flow duplicate
                        records that have the same functional key</h3></div></div></div><p>This second scenario describes a four-component Job that aims at:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>generating a functional key using one algorithm on one of the
                                        input columns, <span class="emphasis"><em>PostalCode,</em></span> as described
                                        in scenario&nbsp;1.</p></li><li class="listitem"><p>matching the columns according to certain matching
                                        types.</p></li><li class="listitem"><p>grouping the output columns by the generated functional key to
                                        optimize the matching operation and compare only the records
                                        that have the same blocking value, functional key in this
                                        scenario. For more information on grouping output columns
                                        and using blocking values, see <a class="xref" href="tMatchGroup.html" title="tMatchGroup">the section called &#8220;tMatchGroup&#8221;</a>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tGenKey9.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92101"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design
                                                workspace: <span class="emphasis"><strong>tRowGenerator</strong></span>, <span class="emphasis"><strong>tGenKey</strong></span>, <span class="emphasis"><strong>tMatchGroup</strong></span> and <span class="emphasis"><strong>tLogRow</strong></span>.</p></li><li class="step" title="Step 2"><p>Connect all the components together using the
                                                  <span class="emphasis"><strong>Main </strong></span>link.</p></li></ol></div></div><div class="section" title="Configuring the data input"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92129"></a>Configuring the data input</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tRowGenerator</strong></span> to define its schema as
                                                follows:</p><div class="mediaobject"><img src="../images/Use_Case_tGenKey10.png"></div><p>The <span class="emphasis"><strong>tRowGenerator</strong></span>
                                                component will generate an input data flow that has
                                                three columns: <span class="emphasis"><em>Firstname,
                                                  Lastname</em></span>, and <span class="emphasis"><em>DOB</em></span>
                                                (date of birth). This data may have problems such as
                                                duplication, first or last names spelled differently
                                                or wrongly, different information for the same
                                                customer, etc.</p></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>OK</strong></span> to validate
                                                the settings and close the dialog box.</p></li></ol></div></div><div class="section" title="Configuring key generation"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92159"></a>Configuring key generation</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tGenKey</strong></span>
                                                to display the <span class="emphasis"><strong>Basic
                                                  settings</strong></span> view and define the component
                                                properties.</p><div class="mediaobject"><img src="../images/Use_Case_tGenKey11.png"></div></li><li class="step" title="Step 2"><p>Under the <span class="emphasis"><strong>Algorithm</strong></span>
                                                table, click the <span class="emphasis"><strong>[+]</strong></span> button to add a row in this
                                                table.</p></li><li class="step" title="Step 3"><p>On the <span class="emphasis"><strong>column</strong></span> column,
                                                click the newly added row and select from the list
                                                the column you want to process using an algorithm.
                                                In this example, select
                                                <span class="emphasis"><em>DoB</em></span>.</p></li><li class="step" title="Step 4"><p>On the <span class="emphasis"><strong>algorithm</strong></span>
                                                column, click the newly added row and select from
                                                the list the algorithm you want to apply to the
                                                corresponding column. In this example, select
                                                  <span class="emphasis"><strong>substring(a,b)</strong></span>.</p></li><li class="step" title="Step 5"><p>Click in the <span class="emphasis"><strong>value</strong></span>
                                                column and enter the value for the selected
                                                algorithm, when needed. In this scenario, type in
                                                  <span class="emphasis"><em>6;10</em></span>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The <span class="emphasis"><strong>substring</strong></span><span class="emphasis"><strong>(a,b)</strong></span> algorithm allows you to extract
                                                  the characters from a string, between two
                                                  specified indices, and to return the new
                                                  substring. First character is at index
                                                  <span class="emphasis"><em>0</em></span>. In this scenario, for a
                                                  given&nbsp;<span class="emphasis"><em>DoB</em></span>
                                                  &#8220;<span class="emphasis"><em>21-01-1995</em></span>&#8221;,&nbsp;<span class="emphasis"><em>6;10</em></span>
                                                  will return only the year of birth, that is to say
                                                  &#8220;1995&#8221; which is the substring from the 7th to the
                                                  10th character.</p></div><p>In this example, we want to generate a functional key
                                                that holds the last four characters of the date of
                                                birth, which correspond to the year of birth, for
                                                each of the data rows and we do not want to define
                                                any extra options on these columns.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can select the <span class="emphasis"><strong>Show
                                                  help</strong></span> check box to display instructions
                                                  on how to set algorithms/options
                                                  parameters.</p></div><p>Once you have defined the <span class="emphasis"><strong>tGenKey</strong></span> properties, you can display a
                                                statistical view of these parameters. To do
                                                so:</p></li><li class="step" title="Step 6"><p>Right-click on the <span class="emphasis"><strong>tGenKey</strong></span> component and select <span class="emphasis"><strong>View Key Profile</strong></span> in the
                                                contextual menu.</p><div class="mediaobject"><img src="../images/Use_Case_tGenKey12.png"></div><p>The <span class="emphasis"><strong>View Key Profile</strong></span>
                                                editor displays, allowing you to visualize the
                                                statistics regarding the number of blocks and to
                                                adapt the parameters according to the results you
                                                want to get.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When you are processing a large amount of data
                                                  and when this component is used to partition data
                                                  in order to use them in a matching component (such
                                                  as <span class="emphasis"><strong>tRecordMatching</strong></span> or <span class="emphasis"><strong>tMatchGroup</strong></span>), it is
                                                  preferable to have a limited number of rows in one
                                                  block. An amount of about 50 rows per block is
                                                  considered optimal, but it depends on the number
                                                  of fields to compare, the total number of rows and
                                                  the time considered acceptable for data
                                                  processing.</p></div><p>If necessary, you can:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>edit the <span class="emphasis"><strong>Limit</strong></span> of rows used to calculate the
                                                  statistics.</p></li><li class="listitem"><p>edit the <span class="emphasis"><strong>column</strong></span> you want to process using an
                                                  algorithm.</p></li><li class="listitem"><p>edit the <span class="emphasis"><strong>algorithm</strong></span> you want to apply to the
                                                  corresponding column.</p></li><li class="listitem"><p>edit the <span class="emphasis"><strong>value</strong></span> the value for the selected
                                                  algorithm, etc.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Every time you make a modification, you can
                                                  see its implications by clicking the <span class="emphasis"><strong>Refresh</strong></span> button which is
                                                  located at the top right part of the
                                                  editor.</p></div></li></ul></div></li></ol></div></div><div class="section" title="Configuring output data grouping"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92303"></a>Configuring output data grouping</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tMatchGroup</strong></span> component to display the
                                                  <span class="emphasis"><strong>Basic settings</strong></span>
                                                view and define the component properties.</p><div class="mediaobject"><img src="../images/Use_Case_tWindowKey7.png"></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you want to add a fixed output column,
                                                  <span class="emphasis"><em>MATCHING_DISTANCES,</em></span> which
                                                  gives the details of the distance between each
                                                  column, click the <span class="emphasis"><strong>Advanced
                                                  settings</strong></span> tab and select the<span class="emphasis"><strong> Output distance details</strong></span>
                                                  check box. For more information, see <a class="xref" href="tMatchGroup.html#Raa75287" title="tMatchGroup properties">the section called &#8220;tMatchGroup properties&#8221;</a>.</p></div></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to
                                                retrieve the schema from the preceding
                                                component.</p></li><li class="step" title="Step 3"><p>Click the <span class="emphasis"><strong>Edit schema</strong></span>
                                                button to view the input and output schema and do
                                                any modifications in the output schema.</p><div class="mediaobject"><img src="../images/Use_Case_tGenKey13.png"></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>In the output schema of this component, there
                                                  are four output standard columns that are
                                                  read-only. For more information, see <a class="xref" href="tMatchGroup.html#Raa75287" title="tMatchGroup properties">the section called &#8220;tMatchGroup properties&#8221;</a>.</p></div></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Key definition</strong></span>
                                                table, click the plus button to add to the list the
                                                columns on which you want to do the matching
                                                operation, <span class="emphasis"><em>FirstName</em></span> and
                                                  <span class="emphasis"><em>LastName</em></span> in this
                                                scenario.</p></li><li class="step" title="Step 5"><p>Click in the first and second cells of the <span class="emphasis"><strong>Matching type</strong></span> column and
                                                select from the list the method(s) to be used for
                                                the matching operation,
                                                  <span class="emphasis"><em>Jaro-Winkler</em></span> in this
                                                example.</p></li><li class="step" title="Step 6"><p>Click in the first and second cells of the <span class="emphasis"><strong>Confidence Weight</strong></span> column
                                                and set the numerical weights for each of the
                                                columns used as key attributes.</p></li><li class="step" title="Step 7"><p>Click the plus button below the <span class="emphasis"><strong>Blocking Definition</strong></span> table to add a
                                                line in the table then click in the line and select
                                                from the list the column you want to use as a
                                                blocking value, <span class="emphasis"><em>T_GEN_KEY</em></span> in
                                                this example. </p><p> Using a blocking value reduces the number of pairs of
                                                records that needs to be examined. The input data is
                                                partitioned into exhaustive blocks based on the
                                                functional key. This will decrease the number of
                                                pairs to compare, as comparison is restricted to
                                                record pairs within each block. </p></li></ol></div></div><div class="section" title="Configuring the console output"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92391"></a>Configuring the console output</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tLogRow
                                                </strong></span>component to display the <span class="emphasis"><strong>Basic settings</strong></span> view.</p></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Mode</strong></span> area,
                                                select <span class="emphasis"><strong>Table</strong></span> to
                                                display the Job execution result in table cells.
                                        </p></li></ol></div><div class="mediaobject"><img src="../images/Use_Case_tBlockedFuzzyJoin5.png"></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e92416"></a>Executing the Job</h4></div></div></div><div class="procedure"><ul class="procedure"><li class="step" title="Step 1"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute it.</p><div class="mediaobject"><img src="../images/Use_Case_tGenKey14.png"></div><p>The output columns include the
                                                  <span class="emphasis"><em>T_GEN_KEY</em></span> column that holds
                                                the functional key generated by the <span class="emphasis"><strong>tGenKey</strong></span> component. You can
                                                see that all records that have the same functional
                                                key are grouped together in three different blocks
                                                &#8220;groups&#8221;. The identifier for each group is listed in
                                                the <span class="emphasis"><em>GID</em></span> column next to the
                                                corresponding record. The number of records in each
                                                of the three output blocks is listed in the
                                                  <span class="emphasis"><em>GRP_SIZE</em></span> column and computed
                                                only on the master record. The
                                                  <span class="emphasis"><em>MASTER</em></span> column indicates with
                                                true/false if the corresponding record is a master
                                                record/not a master record. The
                                                  <span class="emphasis"><em>SCORE</em></span> column lists the
                                                calculated distance between the input record and the
                                                master record according to the <span class="emphasis"><strong>Jaro-Winkler </strong></span>matching
                                                algorithm.</p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tFuzzyUniqRow.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-dataquality.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tGenKeyHadoop.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tFuzzyUniqRow&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tGenKeyHadoop</td></tr></table></div></body></html>