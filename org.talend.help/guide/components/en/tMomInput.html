<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMomInput</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-internet.html" title="Chapter&nbsp;14.&nbsp;Internet components"><link rel="prev" href="tMomConnection.html" title="tMomConnection"><link rel="next" href="tMomMessageIdList.html" title="tMomMessageIdList"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tMomInput</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tMomConnection.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;14.&nbsp;Internet components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tMomMessageIdList.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tMomInput"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMomInput"></a>tMomInput</h2></div></div></div><div class="mediaobject"><img src="../images/tMomInput_icon32_white.png"></div><div class="section" title="tMomInput Properties"><div class="titlepage"><div><div><h3 class="title"><a name="Raa41192"></a>tMomInput Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>Internet </p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Fetches a message from a queue on a Message-Oriented middle ware
                                system and passes it on to the next component.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tMomInput</strong></span> makes it possible to
                                set up asynchronous communications via a MOM server.</p>
                        </td></tr><tr><td>
                            <p>
                                <span class="emphasis"><strong>Basic settings</strong></span>
                            </p>
                        </td><td>
                            <p>
                                <span class="emphasis"><em>Use existing connection</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Select this check box and in the <span class="emphasis"><strong>Component List</strong></span> click the
		relevant connection component to reuse the connection details you already defined.</p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When a Job contains the parent Job and the child Job, <span class="emphasis"><strong>Component
				list</strong></span> presents only the connection components in the same Job level.</p></div>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p><span class="emphasis"><em>Keep listening</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to keep the MOM server listening for and
                                fetching new messages.</p>
                            <p> -For <span class="emphasis"><strong>JBoss Messaging</strong></span> server,
                                with this check box selected, the <span class="emphasis"><strong>Sleeping
                                    time (in sec)</strong></span> field will appear.</p>
                            <p> -For <span class="emphasis"><strong>Active MQ</strong></span> server, with this
                                check box selected, the <span class="emphasis"><strong>Sleeping time (in
                                    sec)</strong></span> field will disappear.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Sleeping time (in sec)</em></span></p>
                        </td><td valign="top">
                            <p>Set the frequency by typing in numbers.</p>
                            <p>(Available when <span class="emphasis"><strong>ActiveMQ</strong></span> or
                                    <span class="emphasis"><strong>JBoss Messaging</strong></span> is selected in
                                the <span class="emphasis"><strong>MQ Server</strong></span> list.)</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>MQ Server</em></span></p>
                        </td><td valign="top">
                            <p>Select the MOM server to be used from the list. According to the
                                server selected, the parameters required differ slightly.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Host/Port</em></span></p>
                        </td><td valign="top">
                            <p>Fill in the Host name or IP address of the MOM server and
                                Port.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Username</em></span></p>
                        </td><td valign="top">
                            <p>Connection login to the server you select in the <span class="emphasis"><strong>MQ Server</strong></span> list.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Password</em></span></p>
                        </td><td valign="top">
                            <p>Connection password to the server you select in the <span class="emphasis"><strong>MQ Server</strong></span> list.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Message From</em></span></p>
                        </td><td valign="top">
                            <p>Type in the message source, exactly as expected by the server;
                                this must include the type and name of the source. e.g.: queue/A or
                                topic/testtopic</p>
                            <p> Note that the field is case-sensitive.</p>
                            <p>(Available when <span class="emphasis"><strong>ActiveMQ</strong></span> or
                                    <span class="emphasis"><strong>JBoss Messaging</strong></span> is selected in
                                the <span class="emphasis"><strong>MQ Server</strong></span> list.)</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Message Type</em></span></p>
                        </td><td valign="top">
                            <p>Select the message type, either: <span class="emphasis"><strong>Topic</strong></span> or <span class="emphasis"><strong>Queue</strong></span>.</p>
                            <p>(Available when <span class="emphasis"><strong>ActiveMQ</strong></span> or
                                    <span class="emphasis"><strong>JBoss Messaging</strong></span> is selected in
                                the <span class="emphasis"><strong>MQ Server</strong></span> list.)</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Message Body Type</em></span></p>
                        </td><td valign="top">
                            <p>Select the message body type, either: <span class="emphasis"><strong>Text</strong></span> , <span class="emphasis"><strong>Bytes</strong></span> or
                                    <span class="emphasis"><strong>Map</strong></span></p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields that will be processed and passed on to the next component. </p>
                            <p>In the context of <span class="emphasis"><strong>tMomInput</strong></span>
                                usage, the schema is comprised of two columns: <span class="emphasis"><strong>From</strong></span> and <span class="emphasis"><strong>Message</strong></span>,
                                and the column names are read only.</p>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><em>Websphere MQ</em></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Channel</em></span></p>
                        </td><td valign="top">
                            <p>Fill this field with the name of the channel through which the
                                data connection is established. The default value is
                                    <span class="emphasis"><em>DC.SVRCONN</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Queue Manager</em></span></p>
                        </td><td valign="top">
                            <p>A system program that provides a logical container for the message
                                queue and is responsible for transferring data to other queue
                                managers via message channels. Fill this field with the name of the
                                queue manager to which the data connection is made.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Message Queue</em></span></p>
                        </td><td valign="top">
                            <p>A queue from which message queueing applications can put messages
                                on, and get messages. Fill this field with the name of the message
                                queue.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Is using message id to fetch</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to fetch messages according to their
                                IDs.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Commit (delete message after reading from the
                                    queue)</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to force a commit after reading each message
                                from the queue.</p>
                        </td></tr><tr><td>&nbsp;</td><td valign="top"><span class="emphasis"><em>Backout removed messages</em></span></td><td valign="top">
                            <p>Select this check box to indicate to the queue manager that all
                                the messages read from the server will not be deleted when the
                                connection to server is cut off. </p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This check box and the <span class="emphasis"><strong>Browse
                                        message</strong></span> check box in the <span class="emphasis"><strong>Advanced settings</strong></span> view enable you to read
                                    messages non-destructively from the queue. It is visible only
                                    when the MQ server is WebSphere MQ with the <span class="emphasis"><strong>Keep listening</strong></span> check box cleared. For
                                    further information, see <a class="link" href="https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf" target="_top">https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf</a>
                                    .</p></div>
                        </td></tr><tr><td valign="top"><span class="emphasis"><em>ActiveMQ</em></span></td><td valign="top">
                            <p><span class="emphasis"><em>Receive number of messages</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to set the number of messages that you will
                                receive on the console.</p>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>When you want to limit the number of
                                        messages to receive, the time limit becomes inactive and the
                                            <span class="emphasis"><strong>Keep
                                            listening</strong></span>/<span class="emphasis"><strong>Sleeping time
                                            (in sec)</strong></span> fields disappear.</em></span></p></div>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p><span class="emphasis"><em>Failover</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to show the server address table.</p>
                            <p>In that table, you can define multiple MQ servers for
                                failover.</p>
                        </td></tr><tr><td valign="top"><span class="emphasis"><strong>Advanced
                            settings</strong></span></td><td valign="top"><span class="emphasis"><em>Acknowledgement Mode</em></span></td><td valign="top">
                            <p>Select an acknowledgement mode from the list to indicate that the
                                client will acknowledge any messages it receives:</p>
                            <p><span class="emphasis"><strong>Auto Acknowledge</strong></span>: With this
                                acknowledgement mode, the client automatically acknowledges a
                                message when it has either successfully returned from a call to
                                receive,or the message listener it has called to process the message
                                successfully returns.</p>
                            <p><span class="emphasis"><strong>Client Acknowledge</strong></span>: With this
                                acknowledgement mode, the client acknowledges a message by calling a
                                message&#8217;s acknowledge method.</p>
                            <p><span class="emphasis"><strong>Dups OK Acknowledge</strong></span>: This
                                acknowledgement mode instructs the session to lazily acknowledge the
                                delivery of messages. </p>
                            <p>For further information about the usage of Jms headers, see <a class="link" href="https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf" target="_top">https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf</a>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If the check box <span class="emphasis"><strong>Set
                                            Transacted</strong></span> is selected in the <span class="emphasis"><strong>Advanced settings</strong></span> view of
                                            <span class="emphasis"><strong>tMomOutput</strong></span>, <span class="emphasis"><strong>Acknowledgement Mode</strong></span> will be
                                        ignored. This check box is enabled when the MQ server is
                                            <span class="emphasis"><strong>ActiveMQ</strong></span> or <span class="emphasis"><strong>JBoss Messaging</strong></span>.</p></div>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Get Jms Header</em></span></td><td valign="top">
                            <p>Select this check box to receive the Jms headers through the
                                mapping from Jms fields onto MQ Series fields. When this checkbox is
                                checked, you can specify the Jms header and the corresponding
                                reference column name in the line(s) you added by clicking the plus
                                button in the <span class="emphasis"><strong>Parameters</strong></span> table. For
                                further information about the usage of Jms headers, see <a class="link" href="https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf" target="_top">https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf</a>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This check box is enabled when the MQ server is ActiveMQ
                                        or JBoss Messaging.</p></div>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Get Jms Properties</em></span></td><td valign="top">
                            <p>Select this check box to receive the Jms properties mapped to MQMD
                                fields. When this checkbox is checked, you can specify the property
                                name, the property type and the reference column name in the line(s)
                                you added by clicking the plus button in the <span class="emphasis"><strong>Parameters</strong></span> table. For further information about the
                                usage of Jms properties, see <a class="link" href="https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf" target="_top">https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf</a>.</p>
                            <p>(Available when <span class="emphasis"><strong>ActiveMQ</strong></span> or
                                    <span class="emphasis"><strong>JBoss Messaging</strong></span> is selected in
                                the <span class="emphasis"><strong>MQ Server</strong></span> list.)</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Browse message</em></span></td><td valign="top">
                            <p>Select this check box to disable <span class="emphasis"><strong>Commit(delete message after reading from the queue)</strong></span>
                                check box and <span class="emphasis"><strong>Backout removed
                                    messages</strong></span> check box in the <span class="emphasis"><strong>Basic
                                    settings</strong></span> view and open the queue to browse
                                messages.</p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This check box and the <span class="emphasis"><strong>Backout removed
                                        messages</strong></span> check box in the <span class="emphasis"><strong>Basic settings</strong></span> view enable you to read messages
                                    non-destructively from the queue. <span class="emphasis"><strong>Browse
                                        message</strong></span> check box is visible only when the MQ
                                    server is WebSphere MQ with the <span class="emphasis"><strong>Backout
                                        removed messages</strong></span> check box cleared. For further
                                    information, see <a class="link" href="http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/index.jsp?topic=%2Fcom.ibm.mq.java.doc%2Fcom%2Fibm%2Fmq%2FMQC.html/" target="_top">http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/index.jsp?topic=%2Fcom.ibm.mq.java.doc%2Fcom%2Fibm%2Fmq%2FMQC.html/</a>.</p></div>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Get MQMD Fields</em></span></td><td valign="top">
                            <p>Select this check box to set one or more message descriptors by
                                adding new fields for MQMD(message queuing message descriptor) in
                                the <span class="emphasis"><strong>Parameters</strong></span> table:</p>
                            <p><span class="emphasis"><strong>Field Name</strong></span>: Select one or more
                                message descriptors from the list to retrieve header information of
                                the message.</p>
                            <p><span class="emphasis"><strong>Reference Column Name</strong></span>: The header
                                and properties information of the message.</p>
                            <p>For further information, see <a class="link" href="http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/index.jsp?topic=%2Fcom.ibm.mq.csqzak.doc%2Ffr13040_.htm/" target="_top">http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/index.jsp?topic=%2Fcom.ibm.mq.csqzak.doc%2Ffr13040_.htm/</a>. </p>
                            <p>(Available when <span class="emphasis"><strong>WebSphere MQ</strong></span> is
                                selected in the <span class="emphasis"><strong>MQ Server</strong></span>
                                list.)</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Include Header</em></span></td><td valign="top">
                            <p>Select this check box to enable the check box for: </p>
                            <p><span class="emphasis"><strong>MQRFH2 fixed Portion</strong></span>: Select this
                                check box and click the plus button to add one or more lines to
                                specify the fields and the reference column names for the fixed
                                portion of MQRFH2 header.</p>
                            <p>and the check boxes for the variable portion which contains the
                                following three folders:</p>
                            <p><span class="emphasis"><strong>MCD folder</strong></span>: Select this check box
                                and click the plus button to add one or more lines to specify the
                                fields and the reference column names for the properties that
                                describe the format of the message.</p>
                            <p><span class="emphasis"><strong>JMS folder</strong></span>: Select this check box
                                and click the plus button to add one or more lines to specify the
                                fields and the reference column names for the transportation of JMS
                                header fields and JMSX properties.</p>
                            <p><span class="emphasis"><strong>USR folder</strong></span>: Select this check box
                                and click the plus button to add one or more lines to specify the
                                fields and the reference column names for the transportation of
                                application-defined properties associated with the message.</p>
                            <p>For further information about MQRFH2 header, see <a class="link" href="https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf" target="_top">https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf</a>.</p>
                            <p>(Available when <span class="emphasis"><strong>WebSphere MQ</strong></span> is
                                selected in the <span class="emphasis"><strong>MQ Server</strong></span>
                                list.)</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Set CipherSpec</em></span></td><td valign="top">
                            <p>Select this check box to enable the CipherSpec list from which you
                                can specify the CipherSpec to be used with WebSphere MQ SSL.</p>
                            <p>For further information about CipherSpec, see <a class="link" href="http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/index.jsp?topic=%2Fcom.ibm.mq.csqzas.doc%2Fsy12870_.htm" target="_top">http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/index.jsp?topic=%2Fcom.ibm.mq.csqzas.doc%2Fsy12870_.htm</a>.</p>
                            <p>(Available when <span class="emphasis"><strong>WebSphere MQ</strong></span> is
                                selected in the <span class="emphasis"><strong>MQ Server</strong></span>
                                list.)</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p><span class="emphasis"><em>tStatCatcher Statistics</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to gather the Job processing metadata at a
                                Job level as well as at each component level.</p>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Dynamic settings</strong></span>
                            </p>
                        </td><td colspan="2" valign="top">
                            <p> Click the <span class="emphasis"><strong>[+]</strong></span> button to add a
                                row in the table and fill the <span class="emphasis"><strong>Code</strong></span>
                                field with a context variable to choose your MQ Server connection
                                dynamically from multiple connections planned in your Job. </p>
                            <p>The <span class="emphasis"><strong>Dynamic settings</strong></span> table is available only when the
			<span class="emphasis"><strong>Use an existing connection</strong></span> check box is selected in the
			<span class="emphasis"><strong>Basic settings</strong></span> view. When a dynamic parameter is
		defined, the <span class="emphasis"><strong>Component List</strong></span> box in the <span class="emphasis"><strong>Basic settings</strong></span> view becomes unusable. </p>
                            <p>For more information on <span class="emphasis"><strong>Dynamic settings</strong></span> and context
		variables, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component is generally used as a start component. It must be
                                linked to an output component.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Make sure the relevant ActiveMQ, JBoss Messaging or Websphere MQ
                                server is launched.</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Asynchronous communication via a MOM server"><div class="titlepage"><div><div><h3 class="title"><a name="Raa41318"></a>Scenario 1: Asynchronous communication via a MOM server</h3></div></div></div><p>This scenario is made of two Jobs. The first Job posts messages on a JBoss server
            queue and the second Job fetches the message from the server.</p><div class="section" title="Configuring and executing the first Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e241963"></a>Configuring and executing the first Job</h4></div></div></div><p>In the first Job, a string message is created using a <span class="emphasis"><strong>tRowGenerator</strong></span> and put on a JBoss server using a <span class="emphasis"><strong>tMomOutput</strong></span>. An intermediary <span class="emphasis"><strong>tLogRow</strong></span> component displays the flow being passed.</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the three components required for the first Job from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace and right-click
                        to connect them using a <span class="emphasis"><strong>Main </strong></span>row
                        link.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput1.png"></div></li><li class="step" title="Step 2"><p>Double-click on <span class="emphasis"><strong>tRowGenerator</strong></span> to set the
                        schema to be randomly generated.</p><div class="mediaobject"><img src="../images/use_case-tmominput2.png"></div></li><li class="step" title="Step 3"><p>Set just one column called <span class="emphasis"><em>message</em></span>. This is the
                        message to be put on the MOM queue.</p></li><li class="step" title="Step 4"><p>This column is of <span class="emphasis"><strong>String</strong></span> type and is
                        nullable. To produce the data, use a preset function which concatenates
                        randomly chosen ascii characters to form a 6-char string. This function is
                            <code class="code">getAsciiRandomString</code>. (Java version). Click the Preview
                        button to view a random sample of data generated.</p></li><li class="step" title="Step 5"><p>Set the <span class="emphasis"><strong>Number of rows to be generated</strong></span> to
                            <span class="emphasis"><em>10</em></span>.</p><p>Click <span class="emphasis"><strong>OK</strong></span> to validate.</p></li><li class="step" title="Step 6"><p>The <span class="emphasis"><strong>tLogRow</strong></span> is only used to display a
                        intermediary state of the data to be handled. In this example, it doesn&#8217;t
                        require any specific configuration.</p></li><li class="step" title="Step 7"><p>Then select the <span class="emphasis"><strong>tMomOutput
                        </strong></span>component.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput3.png"></div></li><li class="step" title="Step 8"><p>In this case, the<span class="emphasis"><strong> MQ server</strong></span> to be used is
                            <span class="emphasis"><strong>JBoss</strong></span>.</p><p>In the <span class="emphasis"><strong>Host</strong></span> and <span class="emphasis"><strong>Port</strong></span> fields, fill in the relevant connection
                        information.</p></li><li class="step" title="Step 9"><p>Select the <span class="emphasis"><strong>Message type</strong></span> from the list.
                        The message can be of <span class="emphasis"><strong>Queue</strong></span> or <span class="emphasis"><strong>Topic</strong></span> type. In this example, select the <span class="emphasis"><strong>Queue </strong></span>type from the list. </p></li><li class="step" title="Step 10"><p>In the <span class="emphasis"><strong>To</strong></span> field, type in the message
                        source information strictly respecting the syntax expected by the server.
                        This should match the Message Type you selected, such as:
                            <code class="code">queue/A</code>. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The message name is case-sensitive, therefore <code class="code">queue/A</code> and
                                <code class="code">Queue/A</code> are different.</p></div></li><li class="step" title="Step 11"><p>Then click <span class="emphasis"><strong>Sync Columns</strong></span> to pass on the
                        schema from the preceding component. The schema being read-only, it cannot
                        be changed. The data posted onto the MQ comes from the first schema column
                        encountered.</p></li><li class="step" title="Step 12"><p>Press <span class="emphasis"><strong>F6</strong></span> to execute the Job and view the
                        data flow being passed on in the console, thanks to the <span class="emphasis"><strong>tLogRow</strong></span> component.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput6.png"></div></li></ol></div></div><div class="section" title="Configuring and executing the second Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e242111"></a>Configuring and executing the second Job</h4></div></div></div><p>Then set the second Job in order to fetch the queuing messages from the MOM
                server.</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the <span class="emphasis"><strong>tMomInput</strong></span> component and a
                            <span class="emphasis"><strong>tLogRow</strong></span> from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput4.png"></div></li><li class="step" title="Step 2"><p> Select the <span class="emphasis"><strong>tMomInput</strong></span> to set the
                        parameters.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput5.png"></div></li><li class="step" title="Step 3"><p>Select the <span class="emphasis"><strong>MQ server</strong></span> from the list. In
                        this example, a JBoss messaging server is used. </p></li><li class="step" title="Step 4"><p>Set the server <span class="emphasis"><strong>Host</strong></span> and <span class="emphasis"><strong>Port</strong></span> information.</p></li><li class="step" title="Step 5"><p>Set the <span class="emphasis"><strong>Message From</strong></span> and the <span class="emphasis"><strong>Message Type</strong></span> to match the source and type
                        expected by the messaging server.</p></li><li class="step" title="Step 6"><p>The <span class="emphasis"><strong>Schema</strong></span> is read-only and is made of
                        two columns: <span class="emphasis"><strong>From</strong></span> and <span class="emphasis"><strong>Message</strong></span>.</p></li><li class="step" title="Step 7"><p>Select the <span class="emphasis"><strong>Keep listening</strong></span> check box and
                        set the verification frequency to <span class="emphasis"><em>5 </em></span>seconds.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When using the <span class="emphasis"><strong>Keep Listening</strong></span> option,
                            you&#8217;ll need to kill the Job to end it.</p></div></li><li class="step" title="Step 8"><p>No need to change any default setting from the <span class="emphasis"><strong>tLogRow</strong></span>.</p></li><li class="step" title="Step 9"><p>Save the Job and run it (when launching for the first time or if you
                        killed it on a previous run).</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput7.png"></div><p>The messages fetched on the server are displayed on the console.</p></li></ol></div></div></div><div class="section" title="Scenario 2: Transmitting XML files via a MOM server"><div class="titlepage"><div><div><h3 class="title"><a name="jzhang-20120420-internet-tmominput_s2"></a>Scenario 2: Transmitting XML files via a MOM server</h3></div></div></div><p>This scenario describes a five-component Job composed of two subjobs that sends XML
            files from a local folder to a MOM queue, and then fetches the files from the MOM queue
            and displays the contents of the files on the console.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-1.png"></div><div class="section" title="Dropping and links the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e242214"></a>Dropping and links the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>From the <span class="emphasis"><strong>Palette</strong></span>, drop the following
                        components one after another onto the design workspace: <span class="emphasis"><strong>tFileList</strong></span>, <span class="emphasis"><strong>tFileInputXML</strong></span>, <span class="emphasis"><strong>tMomOutput</strong></span>,
                            <span class="emphasis"><strong>tMomInput</strong></span>, and <span class="emphasis"><strong>tLogRow</strong></span>.</p></li><li class="step" title="Step 2"><p>Connect <span class="emphasis"><strong>tFileList</strong></span> to <span class="emphasis"><strong>tFileInputXML</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Iterate</strong></span> link, and
                        connect <span class="emphasis"><strong>tFileInputXML</strong></span> to <span class="emphasis"><strong>tMomOutput</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> link to form the
                        first subjob. This subjob will read each XML file in a given folder and send
                        it to a MOM queue. </p></li><li class="step" title="Step 3"><p>Connect <span class="emphasis"><strong>tMomInput</strong></span> to <span class="emphasis"><strong>tLogRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> link to form the
                        second subjob. This subjob will fetch the XML files from MOM queue and
                        display the file contents on the console. </p></li><li class="step" title="Step 4"><p>Connect <span class="emphasis"><strong>tFileInputXML</strong></span> to <span class="emphasis"><strong>tMomInput</strong></span> using a <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>On Component Ok</strong></span>
                        connection to link the two subjobs.</p></li></ol></div></div><div class="section" title="Configuring the first subjob"><div class="titlepage"><div><div><h4 class="title"><a name="d0e242296"></a>Configuring the first subjob</h4></div></div></div><div class="section" title="Configuring the input components"><div class="titlepage"><div><div><h5 class="title"><a name="d0e242299"></a>Configuring the input components</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tFileList</strong></span> component
                            to open its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-2.png"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Directory</strong></span> field, enter the
                            path to the directory to read XML files from, or browse to the path by
                            clicking the <span class="emphasis"><strong>[...]</strong></span> button next to the
                            field.</p></li><li class="step" title="Step 3"><p>Select <span class="emphasis"><strong>Use Glob Expressions as
                                Filemask</strong></span> check box, add a new line in the <span class="emphasis"><strong>Files</strong></span> field by clicking the <span class="emphasis"><strong>[+]</strong></span> button, and enter <code class="code">"*.xml"</code> as
                            the file mask so that all XML files in the directory will be used. Keep
                            all the other settings as they are. </p></li><li class="step" title="Step 4"><p>Double-click the <span class="emphasis"><strong>tFileInputXML</strong></span>
                            component to open its <span class="emphasis"><strong>Basic settings</strong></span>
                            view.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-3.png"></div></li><li class="step" title="Step 5"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to
                                <span class="emphasis"><strong>Edit schema</strong></span> to open the <span class="emphasis"><strong>[Schema]</strong></span> dialog box.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-4.png"></div></li><li class="step" title="Step 6"><p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add a column,
                            give it a name, <span class="emphasis"><em>message</em></span> in this
                            example, and select <span class="emphasis"><strong>Document</strong></span> from the
                                <span class="emphasis"><strong>Type</strong></span> list to handle XML format
                            files. Then, click <span class="emphasis"><strong>OK</strong></span> to close the
                            dialog box.</p></li><li class="step" title="Step 7"><p>In the <span class="emphasis"><strong>File name/Stream </strong></span>field, press
                                <span class="emphasis"><strong>Ctrl+Space</strong></span> to access the global
                            variable list, and select <code class="code">tFileList_1.CURRENT_FILEPATH</code> to
                            loop on the context files&#8217; directory. </p></li><li class="step" title="Step 8"><p>In in the <span class="emphasis"><strong>Loop XPath query</strong></span> fields,
                            enter <code class="code">&#8220;/&#8221;</code> to define the root as the loop node of the input
                            files' structure; in the <span class="emphasis"><strong>Mapping</strong></span> table,
                            fill the <span class="emphasis"><strong>XPath query</strong></span> column with
                                <code class="code">&#8220;.&#8221;</code> to extract all data from context node of the source
                            files, and select the <span class="emphasis"><strong>Get Nodes</strong></span> check
                            box to build a <span class="emphasis"><strong>Document</strong></span> type data flow.
                        </p></li></ol></div></div><div class="section" title="Configuring the tMomOutput component"><div class="titlepage"><div><div><h5 class="title"><a name="d0e242420"></a>Configuring the tMomOutput component</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tMomOutput</strong></span> component
                            to open its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-5.png"></div></li><li class="step" title="Step 2"><p>Select <span class="emphasis"><strong>WebSphere MQ</strong></span> from the
                                <span class="emphasis"><strong>MQ server</strong></span> list, and enter the host
                            name or IP address of the MQ server and the port number.</p></li><li class="step" title="Step 3"><p>Enter the login authentication information in the <span class="emphasis"><strong>Username</strong></span> and <span class="emphasis"><strong>Password</strong></span> fields, and enter the channel name of the
                            transmission queue in the <span class="emphasis"><strong>Channel</strong></span>
                            field. </p></li><li class="step" title="Step 4"><p>As we are handling file messages, select <span class="emphasis"><strong>Text
                                Message</strong></span> from the <span class="emphasis"><strong>Message Body
                                Type</strong></span> list. </p></li><li class="step" title="Step 5"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the
                            schema structure from the preceding component.</p></li><li class="step" title="Step 6"><p>Fill in the queue manager and message queue details in the
                            corresponding fields, and leave the other settings as they are. </p></li></ol></div></div></div><div class="section" title="Configuring the second subjob"><div class="titlepage"><div><div><h4 class="title"><a name="d0e242475"></a>Configuring the second subjob</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tMomInput</strong></span> component to
                        open its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-6.png"></div></li><li class="step" title="Step 2"><p>Set the basic parameters of the component using the same settings you have
                        done in the <span class="emphasis"><strong>tMomOutput</strong></span> component, including
                        the MQ server details, login authentication details, channel, message body
                        type, queue manager and message queue. </p></li><li class="step" title="Step 3"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open the <span class="emphasis"><strong>[Schema]</strong></span> dialog box.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-7.png"></div></li><li class="step" title="Step 4"><p>From the <span class="emphasis"><strong>Type</strong></span> list for the <span class="emphasis"><strong>message</strong></span> column, select <span class="emphasis"><strong>Document</strong></span> to handle XML format files, and then click
                            <span class="emphasis"><strong>OK</strong></span> to close the dialog box.</p></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e242527"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> or click <span class="emphasis"><strong>Run</strong></span> on the <span class="emphasis"><strong>Run</strong></span> tab to
                        execute the Job.</p><p>The XML files in the specified folder are written to the message queue and
                        then retrieved from the queue. The contents of the files are displayed on
                        the console.</p><div class="mediaobject"><img src="../images/use_case-tmominput2-8.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tMomConnection.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-internet.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tMomMessageIdList.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tMomConnection&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tMomMessageIdList</td></tr></table></div></body></html>