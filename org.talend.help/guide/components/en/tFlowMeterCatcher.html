<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFlowMeterCatcher</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-logsanderrors.html" title="Chapter&nbsp;15.&nbsp;Logs &amp; Errors components"><link rel="prev" href="tFlowMeter.html" title="tFlowMeter"><link rel="next" href="tLogCatcher.html" title="tLogCatcher"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tFlowMeterCatcher</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tFlowMeter.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;15.&nbsp;Logs &amp; Errors components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tLogCatcher.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tFlowMeterCatcher"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFlowMeterCatcher"></a>tFlowMeterCatcher</h2></div></div></div><div class="mediaobject"><img src="../images/tFlowMeterCatcher_icon32_white.png"></div><div class="section" title="tFlowMeterCatcher Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e255013"></a>tFlowMeterCatcher Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>Logs &amp; Errors</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Based on a defined sch.ema, the <span class="emphasis"><strong>tFlowMeterCatcher</strong></span> catches the processing volumetric
                                from the <span class="emphasis"><strong>tFlowMeter </strong></span>component and
                                passes them on to the output component.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Operates as a log function triggered by the use of a <span class="emphasis"><strong>tFlowMeter</strong></span> component in the Job.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                    Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the fields to be
                                processed and passed on to the next component. In this particular
                                case, the schema is read-only, as this component gathers standard
                                log information including:</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Moment</strong></span>: Processing time and date
                            </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Pid</strong></span>: Process ID</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Father_pid</strong></span>: Process ID of the
                                father Job if applicable. If not applicable, Pid is
                                duplicated.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Root_pid</strong></span>: Process ID of the root
                                Job if applicable. If not applicable, pid of current Job is
                                duplicated.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>System_pid</strong></span>: Process id generated
                                by the system</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Project:</strong></span> Project name, the Job
                                belongs to.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Job</strong></span>: Name of the current
                                Job</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Job_repository_id</strong></span>: ID generated
                                by the application.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Job_version</strong></span>: Version number of
                                the current Job</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Context</strong></span>: Name of the current
                                context</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Origin</strong></span>: Name of the component if
                                any</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Label</strong></span>: Label of the row
                                connection preceding the <span class="emphasis"><strong>tFlowMeter</strong></span>
                                component in the Job, and that will be analyzed for
                                volumetrics.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Count</strong></span>: Actual number of rows
                                being processed </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Reference</strong></span>: Number of rows passing
                                the reference link.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Thresholds</strong></span>: Only used when the
                                relative mode is selected in the <span class="emphasis"><strong>tFlowMeter</strong></span> component. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component is the start component of a secondary Job which
                                triggers automatically at the end of the main Job. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>The use of this component cannot be separated from the use of the
                                    <span class="emphasis"><strong>tFlowMeter</strong></span>. For more
                                information, see <a class="xref" href="tFlowMeter.html" title="tFlowMeter">the section called &#8220;tFlowMeter&#8221;</a></p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Catching flow metrics from a Job"><div class="titlepage"><div><div><h3 class="title"><a name="Raa48663"></a>Scenario: Catching flow metrics from a Job</h3></div></div></div><p>The following basic Job aims at catching the number of rows being passed in the flow
            processed. The measures are taken twice, once after the input component, that is, before
            the filtering step and once right after the filtering step, that is, before the output
            component.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace: <span class="emphasis"><strong>tMysqlInput</strong></span>, <span class="emphasis"><strong>tFlowMeter</strong></span> (x2),
                        <span class="emphasis"><strong>tMap</strong></span>, <span class="emphasis"><strong>tLogRow</strong></span>, <span class="emphasis"><strong>tFlowMeterCatcher</strong></span> and
                        <span class="emphasis"><strong>tFileOutputDelimited</strong></span>.</p></li><li class="listitem"><p>Link components using row main connections and click on the label to give
                    consistent name throughout the Job, such as <span class="emphasis"><em>US_States</em></span> from
                    the input component and <span class="emphasis"><em>filtered_states</em></span> for the output from
                    the <span class="emphasis"><strong>tMap</strong></span> component, for example.</p></li><li class="listitem"><p>Link the <span class="emphasis"><strong>tFlowMeterCatcher</strong></span> to the <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component using a row main link
                    also as data is passed.</p></li><li class="listitem"><p>On the <span class="emphasis"><strong>tMysqlInput</strong></span> Component view, configure
                    the connection properties as <span class="emphasis"><strong>Repository</strong></span>, if the
                    table metadata are stored in the Repository. Or else, set the Type as <span class="emphasis"><strong>Built-in</strong></span> and configure manually the connection and
                    schema details if they are built-in for this Job.</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>For Talend Open Studio for Big Data, the <span class="emphasis"><strong>Property type</strong></span>, <span class="emphasis"><strong>Schema</strong></span>
				and <span class="emphasis"><strong>Query Type</strong></span> of components are always <span class="emphasis"><strong>Built-in</strong></span>. For how to edit a Built-in schema, see Talend Open Studio
			User Guide.</em></span></p></div></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The 50 States of the USA are recorded in the table
                    <span class="emphasis"><em>states</em></span>. In order for all 50 entries of the table to get
                    selected, the query to run onto the Mysql database is as follows:</p><p>
                    <code class="code">select * from states</code>. </p></li><li class="listitem"><p>Select the relevant <span class="emphasis"><strong>encoding type</strong></span> on the
                    Advanced settings vertical tab.</p></li><li class="listitem"><p>Then select the following component which is a <span class="emphasis"><strong>tFlowMeter</strong></span> and set its properties. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the check box <span class="emphasis"><strong>Use input connection name as
                        label</strong></span>, in order to reuse the label you chose in the log output
                    file (<span class="emphasis"><strong>tFileOutputDelimited</strong></span>). </p></li><li class="listitem"><p>The mode is <span class="emphasis"><strong>Absolute</strong></span> as there is no reference
                    flow to meter against, also no <span class="emphasis"><strong>Threshold</strong></span> is to
                    be set for this example.</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Then launch the <span class="emphasis"><strong>tMap</strong></span> editor to set the
                    filtering properties.</p></li><li class="listitem"><p>For this use case, drag and drop the ID and State columns from the Input area
                    of the <span class="emphasis"><strong>tMap</strong></span> towards the Output area. No
                    variable is used in this example.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>On the Output flow area (labelled <span class="emphasis"><em>filtered_states</em></span> in this
                    example), click the arrow &amp; plus button to activate the expression filter
                    field. </p></li><li class="listitem"><p>Drag the <span class="emphasis"><em>State</em></span> column from the Input area
                        (<span class="emphasis"><em>row2</em></span>) towards the expression filter field and type in
                    the rest of the expression in order to filter the state labels starting with the
                    letter <span class="emphasis"><em>M</em></span>. The final expression looks like:
                        <code class="code">row2.State.startsWith("M")</code>
                </p></li><li class="listitem"><p>Click <span class="emphasis"><strong>OK</strong></span> to validate the setting.</p></li><li class="listitem"><p>Then select the second <span class="emphasis"><strong>tFlowMeter</strong></span> component
                    and set its properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the check box <span class="emphasis"><strong>Use input connection name as
                        label</strong></span>.</p></li><li class="listitem"><p>Select <span class="emphasis"><strong>Relative </strong></span>as <span class="emphasis"><strong>Mode</strong></span> and in the <span class="emphasis"><strong>Reference
                        connections</strong></span> list, select <span class="emphasis"><em>US_States</em></span> as
                    reference to be measured against.</p></li><li class="listitem"><p>Once again, no threshold is used for this use case.</p></li><li class="listitem"><p>No particular setting is required in the <span class="emphasis"><strong>tLogRow</strong></span>. </p></li><li class="listitem"><p>Neither does the <span class="emphasis"><strong>tFlowMeterCatcher</strong></span> as this
                    component&#8217;s properties are limited to a preset schema which includes typical log
                    information.</p></li><li class="listitem"><p>So eventually set the log output component (<span class="emphasis"><strong>tFileOutputDelimited</strong></span>).</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher8.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the <span class="emphasis"><strong>Append</strong></span> check box in order to log
                    all <span class="emphasis"><strong>tFlowMeter</strong></span> measures.</p></li><li class="listitem"><p>Then save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute
                    it.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher9.png"></div><p>The <span class="emphasis"><strong>Run</strong></span> view shows the filtered state labels as
            defined in the Job.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher7.png"></div><p>In the delimited csv file, the number of rows shown in column <span class="emphasis"><strong>count</strong></span> varies between <span class="emphasis"><strong>tFlowMeter1</strong></span> and
                <span class="emphasis"><strong>tFlowMeter2</strong></span> as the filtering has then been carried
            out. The <span class="emphasis"><em>reference</em></span> column shows also this difference.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tFlowMeter.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-logsanderrors.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tLogCatcher.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tFlowMeter&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tLogCatcher</td></tr></table></div></body></html>