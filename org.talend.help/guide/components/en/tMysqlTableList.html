<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMysqlTableList</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-databases-traditional.html" title="Chapter&nbsp;7.&nbsp;Databases - traditional components"><link rel="prev" href="tMysqlSP.html" title="tMysqlSP"><link rel="next" href="tOracleBulkExec.html" title="tOracleBulkExec"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tMysqlTableList</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tMysqlSP.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;7.&nbsp;Databases - traditional components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tOracleBulkExec.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tMysqlTableList"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMysqlTableList"></a>tMysqlTableList</h2></div></div></div><div class="mediaobject"><img src="../images/tMysqlTableList_icon32_white.png"></div><div class="section" title="tMysqlTableList Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e98836"></a>tMysqlTableList Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top"><p><span class="emphasis"><strong>Component
                                family</strong></span></p>
                        </td><td valign="top"><p>Databases/MySQL</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top"><p>Iterates on a set of
                                table names through a defined Mysql connection.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top"><p>Lists the names of a
                                given set of Mysql tables using a select statement based on a Where
                                clause.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Basic
                                settings</strong></span></p>
                        </td><td valign="top"><p><span class="emphasis"><em>Component list</em></span></p>
                        </td><td valign="top"><p>Select the <span class="emphasis"><strong>tMysqlConnection</strong></span> component in the list if more than
                                one connection are planned for the current job.</p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td valign="top"><p>Where clause for table name selection</p>
                        </td><td valign="top"><p>Enter the Where clause to identify the tables to
                                iterate on.</p>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Dynamic settings</strong></span>
                            </p>
                        </td><td colspan="2" valign="top">
                            <p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add a row in the table and fill
		the <span class="emphasis"><strong>Code</strong></span> field with a context variable to choose your
		database connection dynamically from multiple connections planned in your Job. This feature
		is useful when you need to access database tables having the same data structure but in
		different databases, especially when you are working in an environment where you cannot
		change your Job settings, for example, when your Job has to be deployed and executed
		independent of <span class="emphasis"><strong>Talend</strong></span> Studio.</p>
                            <p>When a dynamic parameter is defined, the <span class="emphasis"><strong>Component List</strong></span>
		box in the <span class="emphasis"><strong>Basic settings</strong></span> view becomes unusable.</p>
                            <p>For more information on <span class="emphasis"><strong>Dynamic settings</strong></span> and context
		variables, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top"><p>This component is to be
                                used along with Mysql components, especially with <span class="emphasis"><strong>tMysqlConnection</strong></span>.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top"><p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Iterating on DB tables and deleting their content using a user-defined SQL template"><div class="titlepage"><div><div><h3 class="title"><a name="Raa77770"></a>Scenario: Iterating on DB tables and deleting
                their content using a user-defined SQL template</h3></div></div></div><p>The following Java scenario creates a
                three-component job that iterates on given table names from a MySQL database using a
                WHERE clause. It then deletes the content of the tables directly on the DBMS using a
                user-defined SQL template.</p><p>For advanced use, start with creating a connection
                to the database that contains the tables you want to empty of their
                content.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Repository</strong></span> tree view, expand
                        <span class="emphasis"><strong>Metadata</strong></span> and right click <span class="emphasis"><strong>DB Connections</strong></span> to create a connection to the relevant
                    database and to store the connection information locally. </p><p> For more information about Metadata, see <span class="emphasis"><em>Talend Open Studio</em></span>
                    <span class="emphasis"><strong>User Guide</strong></span>.</p><p> Otherwise, drop a <span class="emphasis"><strong>tMySQLConnection</strong></span> component
                    in the design workspace and fill the connection details manually. </p></li><li class="listitem"><p> Drop the database connection you created from the <span class="emphasis"><strong>Repository</strong></span> onto the design workspace. </p><p> The <span class="emphasis"><strong>[Components]</strong></span> dialog box displays.</p></li><li class="listitem"><p> Select <span class="emphasis"><strong>tMysqlConnection</strong></span> and click <span class="emphasis"><strong>OK</strong></span>.</p><p> The <span class="emphasis"><strong>tMysqlConnection</strong></span> components displays on
                    the design workspace with all connection details automatically filled in its
                        <span class="emphasis"><strong>Basic settings</strong></span> view.</p></li><li class="listitem"><p> Drop the following two components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: <span class="emphasis"><strong>tMysqlTableList</strong></span> and <span class="emphasis"><strong>tELT</strong></span>.</p></li><li class="listitem"><p> Connect <span class="emphasis"><strong>tMysqlConnection </strong></span>to <span class="emphasis"><strong>tMysqlTableList </strong></span>using an <span class="emphasis"><strong>OnSubjobOk</strong></span> link.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Connect <span class="emphasis"><strong>tMysqlTableList </strong></span>to <span class="emphasis"><strong>tELT </strong></span>using an <span class="emphasis"><strong>Iterate</strong></span> link.</p></li><li class="listitem"><p> If needed, double-click <span class="emphasis"><strong>tMysqlConnection</strong></span> to
                    display its <span class="emphasis"><strong>Basic settings </strong></span>view and verify the
                    connection details.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate1.png"></div><p>In this example, we want to connect to a MySQL
                database called <span class="emphasis"><em>examples</em></span>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, double-click <span class="emphasis"><strong>tMysqlTableList</strong></span> to display its <span class="emphasis"><strong>Basic
                        settings</strong></span> view and define its settings.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> On the <span class="emphasis"><strong>Component list</strong></span>, select the relevant
                    MySQL connection component if more than one connection is used.</p></li><li class="listitem"><p> Enter a WHERE clause using the right syntax in the corresponding field to
                    iterate on the table name(s) you want to delete the content of.</p><p> In this scenario, we want the job to iterate on all the tables which names
                    start with &#8220;ex&#8221;.</p></li><li class="listitem"><p> In the design workspace, double-click <span class="emphasis"><strong>tELT</strong></span>
                    to display its <span class="emphasis"><strong>Basic settings</strong></span> view and define
                    its settings.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In <span class="emphasis"><strong>Database Name</strong></span>, enter the name of the
                    database containing the tables you want to process.</p></li><li class="listitem"><p> On the <span class="emphasis"><strong>Component list</strong></span>, select the relevant
                    MySQL connection component if more than one connection is used.</p></li><li class="listitem"><p> Click in the <span class="emphasis"><strong>Table name</strong></span> field and press
                        <span class="emphasis"><strong>Ctrl+Space </strong></span>to access the global variable
                    list.</p></li><li class="listitem"><p> From the global variable list, select
                        <span class="emphasis"><em>((String)globalMap.get("tMysqlTableList_1_CURRENT_TABLE"))</em></span>.</p></li></ul></div><p><span class="emphasis"><strong>To create the user-defined SQL template:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Repository </strong></span>tree view, expand
                        <span class="emphasis"><strong>SQL Templates</strong></span> and <span class="emphasis"><strong>MySQL</strong></span> in succession.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Right-click <span class="emphasis"><strong>UserDefined</strong></span> and select <span class="emphasis"><strong>Create SQLTemplate</strong></span> from the drop-down list.</p><p> The <span class="emphasis"><strong>New SQLTemplate </strong></span>wizard opens.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Enter a name for the new SQL template and fill in the other fields If needed
                    and then click <span class="emphasis"><strong>Finish</strong></span> to close the
                    wizard.</p><p> An SQL pattern editor opens on the design workspace.</p></li><li class="listitem"><p> Delete the existing code and enter the code necessary to carry out the
                    desired action, deleting the content of all tables which names start with &#8220;ex&#8221;
                    in this example.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate6.png"></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>In the SQL template code, you must use the correct variable name attached to the
				table name parameter (&#8220;__TABLE-NAME__&#8221; in this example). To display the variable
				name used, put your pointer in the <span class="emphasis"><strong>Table Name </strong></span>field
				in the basic settings of the <span class="emphasis"><strong>tELT</strong></span> component.</p></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save the new user-defined
                    SQL template.</p></li></ul></div><p>The next step is to add the new user-defined SQL
                template to the SQL template list in the <span class="emphasis"><strong>tELT</strong></span> component.</p><p><span class="emphasis"><strong>To add the user-defined SQL template to the SQL template
                list:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Component </strong></span>view of <span class="emphasis"><strong>tELT</strong></span>, click the <span class="emphasis"><strong>SQL
                        Templates</strong></span> tab to display the <span class="emphasis"><strong>SQLTemplate
                        List</strong></span>. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate8.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Click the <span class="emphasis"><strong>Add</strong></span> button and add two SQL
                    template lines.</p></li><li class="listitem"><p> Click in the first line to display a drop-down arrow and then click the arrow
                    to display the SQL template list.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLTableList_SQLTemplate9.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Select in the list the user-defined SQL template you already created.</p></li><li class="listitem"><p> Make sure that the SQL template in the second line is <span class="emphasis"><strong>Commit</strong></span>.</p></li><li class="listitem"><p> Save your job and press <span class="emphasis"><strong>F6</strong></span> to execute
                    it.</p></li></ul></div><p>All tables in the MySQL
        	<code class="code">examples</code>
        	database which names begin with &#8220;<code class="code">ex</code>&#8221; are emptied from
their content.</p></div><div class="section" title="Related scenario"><div class="titlepage"><div><div><h3 class="title"><a name="d0e99289"></a>Related scenario</h3></div></div></div><p>For <span class="emphasis"><strong>tMysqlTableList</strong></span> related scenario, see <a class="xref" href="tMysqlColumnList.html#Raa94771" title="Scenario: Iterating on a DB table and listing its column names">the section called &#8220;Scenario: Iterating on a DB table and listing its column names&#8221;</a>.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tMysqlSP.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-databases-traditional.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tOracleBulkExec.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tMysqlSP&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tOracleBulkExec</td></tr></table></div></body></html>