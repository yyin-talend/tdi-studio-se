<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMysqlRow</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-databases-traditional.html" title="Chapter&nbsp;7.&nbsp;Databases - traditional components"><link rel="prev" href="tMysqlRollback.html" title="tMysqlRollback"><link rel="next" href="tMysqlSP.html" title="tMysqlSP"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tMysqlRow</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tMysqlRollback.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;7.&nbsp;Databases - traditional components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tMysqlSP.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tMysqlRow"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMysqlRow"></a>tMysqlRow</h2></div></div></div><div class="mediaobject"><img src="../images/tMysqlRow_icon32_white.png"></div><div class="section" title="tMysqlRow properties"><div class="titlepage"><div><div><h3 class="title"><a name="Raa13214"></a>tMysqlRow properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Databases/MySQL</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tMysqlRow</strong></span> is the specific
								component for this database query. It executes the SQL query stated
								in the specified database. The row suffix means the component
								implements a flow in the job design although it doesn&#8217;t provide
								output. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>Depending on the nature of the query and the database, <span class="emphasis"><strong>tMysqlRow</strong></span> acts on the actual DB structure
								or on the data (although without handling data). The SQLBuilder tool
								helps you write easily your SQL statements.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Property type</em></span>
							</p>
						</td><td valign="top">
							<p><span>Either <span class="emphasis"><strong>Built-in</strong></span> or <span class="emphasis"><strong>Repository</strong></span></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: No property data stored
								centrally.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: Select the repository
								file in which the properties are stored. The fields that follow are
								completed automatically using the data retrieved.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>DB Version</em></span>
							</p>
						</td><td valign="top">
							<p>Select the MySQL version that you are using.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use an existing connection</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box and in the <span class="emphasis"><strong>Component List</strong></span> click the
		relevant connection component to reuse the connection details you already defined.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When a Job contains the parent Job and the child Job, if you need to share an existing
			connection between the two levels, for example, to share the connection created by the
			parent Job with the child Job, you have to: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the parent level, register the DB connection to be shared in the
							<span class="emphasis"><strong>Basic settings</strong></span> view of the connection
						component which creates that very DB connection.</p></li><li class="listitem"><p>In the child level, use a dedicated connection component to read that
						registered DB connection.</p></li></ol></div><p>For an example about how to share a DB connection across Job levels,see
					<span class="emphasis"><em>Talend Open Studio
				User Guide</em></span>.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Host</em></span>
							</p>
						</td><td valign="top">
							<p>Database server IP address</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Port</em></span>
							</p>
						</td><td valign="top">
							<p>Listening port number of DB server.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Database</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the database</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Username</em></span> and
								<span class="emphasis"><em>Password</em></span></p>
						</td><td valign="top">
							<p>DB user authentication data.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
								Schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields to be processed and passed on to the next component. <span>The schema is either <span class="emphasis"><strong>Built-in</strong></span> or stored remotely in the
										<span class="emphasis"><strong>Repository</strong></span></span>. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: The schema is created
								and stored locally for this component only. Related topic: see
										<span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: The schema already
								exists and is stored in the Repository, hence can be reused. Related
								topic: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Table Name</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the table to be processed. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Query type</em></span>
							</p>
						</td><td valign="top">
							<p><span>Either <span class="emphasis"><strong>Built-in</strong></span> or <span class="emphasis"><strong>Repository</strong></span></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: Fill in manually the
								query statement or build it graphically using SQLBuilder</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: Select the relevant
								query stored in the Repository. The Query field gets accordingly
								filled in.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Guess</em></span>
								<span class="emphasis"><em>Query</em></span>
							</p>
						</td><td valign="top">
							<p>Click the <span class="emphasis"><strong>Guess Query</strong></span> button to
								generate the query which corresponds to your table schema in the
									<span class="emphasis"><strong>Query</strong></span> field.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Query</em></span>
							</p>
						</td><td valign="top">
							<p>Enter your DB query paying particularly attention to properly
								sequence the fields in order to match the schema definition. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Die on error</em></span>
							</p>
						</td><td valign="top">
							<p>This check box is selected by default. Clear the check box to skip
								the row on error and complete the process for error-free rows. If
								needed, you can retrieve the rows on error via a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Rejects</strong></span> link.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top"><span class="emphasis"><em>Specify a data source alias</em></span>
						</td><td valign="top">
							<p>Select this check box and specify the alias of a data source created on the <span class="emphasis"><strong>Talend</strong></span>
		Runtime side to use the shared connection pool defined in the data source configuration.
		This option works only when you deploy and run your Job in <span class="emphasis"><strong>Talend</strong></span> Runtime. </p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you use the component's own DB configuration, your data source connection will be closed
			at the end of the component. To prevent this from happening, use a shared DB connection
			with the data source alias specified.</p></div>
							<p>This check box is not available when the <span class="emphasis"><strong>Use an existing
			connection</strong></span> check box is selected. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Advanced settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Additional JDBC parameters</em></span>
							</p>
						</td><td valign="top">
							<p>Specify additional connection properties for the DB connection you
								are creating. This option is not available if you have selected the
									<span class="emphasis"><strong>Use an existing connection</strong></span>
								check box in the <span class="emphasis"><strong>Basic
								settings</strong></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Propagate QUERY&#8217;s recordset</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to insert the result of the query in a
								COLUMN of the current flow. Select this column from the <span class="emphasis"><strong>use column</strong></span> list.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option allows the component to have a different schema
									from that of the preceding component. Moreover, the column that
									holds the QUERY&#8217;s recordset should be set to the type of
										<span class="emphasis"><em>Object</em></span> and this component
									is usually followed by <span class="emphasis"><strong>tParseRecordSet</strong></span>.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use PreparedStatement</em></span>
							</p>
						</td><td valign="top">
							<p>Select this checkbox if you want to query the database using a
								PreparedStatement. In the <span class="emphasis"><strong>Set
									PreparedStatement Parameter </strong></span>table, define the
								parameters represented by &#8220;?&#8221; in the SQL instruction of the
									<span class="emphasis"><strong>Query</strong></span> field in the <span class="emphasis"><strong>Basic Settings</strong></span> tab.</p>
							<p>
								<span class="emphasis"><strong>Parameter Index</strong></span>: Enter the
								parameter position in the SQL instruction.</p>
							<p>
								<span class="emphasis"><strong>Parameter Type</strong></span>: Enter the parameter
								type.</p>
							<p>
								<span class="emphasis"><strong>Parameter Value</strong></span>: Enter the
								parameter value.</p>
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option is very useful if you need to execute the same
									query several times. Performance levels are increased</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Commit every</em></span>
							</p>
						</td><td valign="top">
							<p>Number of rows to be completed before committing batches of rows
								together into the DB. This option ensures transaction quality (but
								not rollback) and above all better performance on executions.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStatCatcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to collect log data at the component
								level.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Dynamic settings</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add a row in the table and fill
		the <span class="emphasis"><strong>Code</strong></span> field with a context variable to choose your
		database connection dynamically from multiple connections planned in your Job. This feature
		is useful when you need to access database tables having the same data structure but in
		different databases, especially when you are working in an environment where you cannot
		change your Job settings, for example, when your Job has to be deployed and executed
		independent of <span class="emphasis"><strong>Talend</strong></span> Studio.</p>
							<p>The <span class="emphasis"><strong>Dynamic settings</strong></span> table is available only when the
			<span class="emphasis"><strong>Use an existing connection</strong></span> check box is selected in the
			<span class="emphasis"><strong>Basic settings</strong></span> view. When a dynamic parameter is
		defined, the <span class="emphasis"><strong>Component List</strong></span> box in the <span class="emphasis"><strong>Basic settings</strong></span> view becomes unusable. </p>
							<p>For more information on <span class="emphasis"><strong>Dynamic settings</strong></span> and context
		variables, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component offers the flexibility of the DB query and covers
								all possible SQL queries.</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Removing and regenerating a MySQL table index"><div class="titlepage"><div><div><h3 class="title"><a name="Raa11099"></a>Scenario 1: Removing and regenerating a MySQL table index</h3></div></div></div><p>This scenario describes a four-component job that removes a table index, applies a
			select insert action onto a table then regenerates the index.</p><div class="section" title="Linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97148"></a>Linking the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p> Select and drop the following components onto the design workspace:
							<span class="emphasis"><strong>tMysqlRow</strong></span> (x2), <span class="emphasis"><strong>tRowGenerator</strong></span>, and <span class="emphasis"><strong>tMysqlOutput</strong></span>.</p></li><li class="step" title="Step 2"><p>Link the first <span class="emphasis"><strong>tMysqlRow</strong></span> to <span class="emphasis"><strong>tRowGenerator</strong></span> using an <span class="emphasis"><strong>OnComponentOk</strong></span> connection.</p></li><li class="step" title="Step 3"><p> Link <span class="emphasis"><strong>tRowGenerator</strong></span> to <span class="emphasis"><strong>tMysqlOutput</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
						connection.</p></li><li class="step" title="Step 4"><p>Link <span class="emphasis"><strong>tRowGenerator</strong></span> to the second
							<span class="emphasis"><strong>tMysqlRow</strong></span> using an <span class="emphasis"><strong>OnSubjobOk</strong></span> connection.</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow.png"></div></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97206"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p> Select the <span class="emphasis"><strong>tMysqlRow</strong></span> to fill in the DB
							<span class="emphasis"><strong>Basic settings</strong></span>. </p></li><li class="step" title="Step 2"><p> In <span class="emphasis"><strong>Property type
						</strong></span>as well in <span class="emphasis"><strong>Schema</strong></span>, select the
						relevant DB entry in the list.</p><p> The DB connection details and the table schema are
						accordingly filled in. </p></li><li class="step" title="Step 3"></li><li class="step" title="Step 4"><p> Propagate the properties and schema details onto the other components of
						the Job.</p><p> The query being stored in the <span class="emphasis"><strong>Metadata</strong></span> area of the <span class="emphasis"><strong>Repository</strong></span>, you can also select <span class="emphasis"><strong>Repository</strong></span> in the <span class="emphasis"><strong>Query
							type</strong></span> field and the relevant query entry. </p></li><li class="step" title="Step 5"><p><span> If you didn&#8217;t store your query in the
								<span class="emphasis"><strong>Repository</strong></span>, type</span> in the following SQL statement to
						alter the database entries: drop index &lt;index_name&gt; on
						&lt;table_name&gt; </p></li><li class="step" title="Step 6"><p> Select the second <span class="emphasis"><strong>tMysqlRow</strong></span> component,
						check the DB properties and schema.</p></li><li class="step" title="Step 7"><p> Type in the SQL statement to recreate an index on the table using the
						following statement: create index &lt;index_name&gt; on &lt;table_name&gt;
						(&lt;column_name&gt;)</p><p> The <span class="emphasis"><strong>tRowGenerator</strong></span> component is used to
						generate automatically the columns to be added to the DB output table
						defined.</p></li><li class="step" title="Step 8"><p> Select the <span class="emphasis"><strong>tMysqlOutput</strong></span> component and
						fill in the DB connection properties<span> either
							from the Repository or manually the DB connection details are specific
							for this use only</span>. The table to be fed is named:
							<span class="emphasis"><em>comprehensive</em></span>.</p></li><li class="step" title="Step 9"><p> The schema should be automatically inherited from the data flow coming
						from the <span class="emphasis"><strong>tLogRow</strong></span>. Edit the schema to check
						its structure and check that it corresponds to the schema expected on the DB
						table specified.</p><p> The <span class="emphasis"><strong>Action on table</strong></span> is
							<span class="emphasis"><em>None</em></span> and the <span class="emphasis"><strong>Action on
							data</strong></span> is <span class="emphasis"><em>Insert</em></span>. </p><p> No additional Columns is required for this job.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97304"></a>Executing the Job </h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save the Job.</p></li><li class="step" title="Step 2"><p> Press <span class="emphasis"><strong>F6</strong></span> to run the job.</p><p>If you manage to watch the action on DB data, you can notice that the
						index is dropped at the start of the job and recreated at the end of the
						insert action.</p><p>Related topics: <a class="xref" href="tDBSQLRow.html#Raa82693" title="tDBSQLRow properties">the section called &#8220;tDBSQLRow properties&#8221;</a>.</p></li></ol></div></div></div><div class="section" title="Scenario 2: Using PreparedStatement objects to query data"><div class="titlepage"><div><div><h3 class="title"><a name="Raa48944"></a>Scenario 2: Using PreparedStatement objects to query data</h3></div></div></div><p>This scenario describes a four component job which allows you to link a table column
			with a client file. The MySQL table contains a list of all the American States along
			with the State ID, while the file contains the customer information including the ID of
			the State in which they live. We want to retrieve the name of the State for each client,
			using an SQL query. In order to process a large volume of data quickly, we use a
			PreparedStatement object which means that the query is executed only once rather than
			against each row in turn. Then each row is sent as a parameter. Note that
			PreparedStatement object can also be used in avoiding SQL injection.</p><p>For this scenario, we use a file and a database for which we have already stored the
			connection and properties in the Rerpository metadata. <span>For further information concerning the creation of metadata in delimited files, the
				creation of database connection metadata and the usage of metadata, see
						<span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</span></p><div class="section" title="Linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97339"></a>Linking the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the <span class="emphasis"><strong>Repository</strong></span>, expand the <span class="emphasis"><strong>Metadata</strong></span> and <span class="emphasis"><strong>File
							delimited</strong></span> nodes.</p></li><li class="step" title="Step 2"><p>Select the metadata which corresponds to the client file and slide the
						metadata onto the workspace. Here, we are using the
							<span class="emphasis"><em>customers</em></span> metadata.</p></li><li class="step" title="Step 3"><p>Double-click <span class="emphasis"><strong>tFileInputDelimited</strong></span> in the <span class="emphasis"><strong>Components</strong></span> dialog box to add <span class="emphasis"><strong>tFileInputDelimited</strong></span> to the workspace, with the
						relevant fields filled by the metadata file.</p></li><li class="step" title="Step 4"><p>Drop <span class="emphasis"><strong>tMysqlRow</strong></span>, <span class="emphasis"><strong>tParseRecordSet</strong></span> and <span class="emphasis"><strong>tFileOutputDelimited</strong></span> onto the workspace.</p></li><li class="step" title="Step 5"><p>Link <span class="emphasis"><strong>tFileInputDelimited</strong></span> to <span class="emphasis"><strong>tMysqlRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
						connection.</p></li><li class="step" title="Step 6"><p>Link <span class="emphasis"><strong>tMysqlRow</strong></span> to <span class="emphasis"><strong>tParseRecordSet</strong></span> using a <span class="emphasis"><strong>Row</strong></span>
						&gt; <span class="emphasis"><strong>Main</strong></span> connection.</p></li><li class="step" title="Step 7"><p>Link <span class="emphasis"><strong>tParseRecordSet</strong></span> to <span class="emphasis"><strong>tFileOutputDelimited</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
						connection.</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_1.png"></div></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97433"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p> Double-click <span class="emphasis"><strong>tFileInputDelimited</strong></span> to open
						its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_2.png"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Schema</strong></span> list, select <span class="emphasis"><strong>Built-in</strong></span> so that you can modify the component&#8217;s
						schema. Then click on <span class="emphasis"><strong>[...]</strong></span> next to the
							<span class="emphasis"><strong>Edit schema</strong></span> field to add a column into
						which the name of the State will be inserted.</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_3.png"></div></li><li class="step" title="Step 3"><p> Click on the <span class="emphasis"><strong>[+]</strong></span> button to add a column
						to the schema. Rename this column <span class="emphasis"><em>LabelStateRecordSet</em></span>
						and select <span class="emphasis"><strong>Object</strong></span> from the <span class="emphasis"><strong>Type</strong></span> list. Click <span class="emphasis"><strong>OK</strong></span> to save your modifications.</p><p> From the <span class="emphasis"><strong>Palette</strong></span>, select the <span class="emphasis"><strong>tMysqlRow</strong></span>, <span class="emphasis"><strong>tParseRecordSet</strong></span> and <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components and drop them onto the
						workspace.</p></li><li class="step" title="Step 4"><p> Double click <span class="emphasis"><strong>tMysqlRow</strong></span> to set its
						properties in the <span class="emphasis"><strong>Basic settings</strong></span> tab of the
							<span class="emphasis"><strong>Component</strong></span> view. </p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_4.png"></div></li><li class="step" title="Step 5"><p> In the <span class="emphasis"><strong>Property Type</strong></span> list,
							select<span class="emphasis"><strong> Repository</strong></span> and click on the
							<span class="emphasis"><strong>[...] </strong></span>button to select a database
						connection from the metadata in the Repository. The <span class="emphasis"><strong>DB
							Version</strong></span>, <span class="emphasis"><strong>Host</strong></span>, <span class="emphasis"><strong>Port</strong></span>, <span class="emphasis"><strong>Database</strong></span>,
							<span class="emphasis"><strong>Username</strong></span> and <span class="emphasis"><strong>Password</strong></span> fields are completed automatically. If you are
						using the <span class="emphasis"><strong>Built-in</strong></span> mode, complete these
						fields manually.</p></li><li class="step" title="Step 6"><p> From the <span class="emphasis"><strong>Schema</strong></span> list, select <span class="emphasis"><strong>Built-in</strong></span> to set the schema properties manually
						and add the <span class="emphasis"><em>LabelStateRecordSet</em></span> column, or click
						directly on the <span class="emphasis"><strong>Sync columns</strong></span> button to
						retrieve the schemma from the preceding component.</p></li><li class="step" title="Step 7"><p> In the <span class="emphasis"><strong>Query</strong></span> field, enter the SQL query
						you want to use. Here, we want to retrieve the names of the American States
						from the <span class="emphasis"><em>LabelState</em></span> column of the MySQL table,
							<span class="emphasis"><em>us_state</em></span>: <code class="code">"SELECT LabelState FROM us_state
							WHERE idState=?"</code>. </p><p>The question mark, &#8220;<code class="code">?</code>&#8221;, represents the parameter to be set in
						the <span class="emphasis"><strong>Advanced settings</strong></span> tab.</p></li><li class="step" title="Step 8"><p> Click <span class="emphasis"><strong>Advanced settings</strong></span> to set the
						components advanced properties. </p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_5.png"></div></li><li class="step" title="Step 9"><p> Select the <span class="emphasis"><strong>Propagate QUERY&#8217;s recordset</strong></span>
						check box and select the <span class="emphasis"><em>LabelStateRecordSet</em></span> column
						from the <span class="emphasis"><strong>use column</strong></span> list to insert the
						query results in that column.</p><p> Select the <span class="emphasis"><strong>Use PreparedStatement</strong></span> check
						box and define the parameter used in the query in the <span class="emphasis"><strong>Set PreparedStatement Parameters</strong></span> table.</p><p> Click on the <span class="emphasis"><strong>[+]</strong></span> button to add a
						parameter. </p><p> In the <span class="emphasis"><strong>Parameter Index</strong></span> cell, enter the
						parameter position in the SQL instruction. Enter &#8220;<span class="emphasis"><em>1</em></span>&#8221; as
						we are only using one parameter in this example. </p><p> In the <span class="emphasis"><strong>Parameter Type</strong></span> cell, enter the
						type of parameter. Here, the parameter is a whole number, hence, select
							<span class="emphasis"><strong>Int</strong></span> from the list.</p><p> In the <span class="emphasis"><strong>Parameter Value</strong></span> cell, enter the
						parameter value. Here, we want to retrieve the name of the State based on
						the State ID for every client in the input file. Hence, enter
								&#8220;<code class="code"><span>row1.idState</span>&#8221;.</code></p></li><li class="step" title="Step 10"><p> Double click <span class="emphasis"><strong>tParseRecordSet</strong></span> to set its
						properties in the <span class="emphasis"><strong>Basic settings</strong></span> tab of the
							<span class="emphasis"><strong>Component</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_6.png"></div></li><li class="step" title="Step 11"><p> From the <span class="emphasis"><strong>Prev. Comp. Column list</strong></span>, select
						the preceding components column for analysis. In this example, select
							<span class="emphasis"><em>LabelStateRecordSet</em></span>.</p><p> Click on the <span class="emphasis"><strong>Sync columns</strong></span> button to
						retrieve the schema from the preceding component. The <span class="emphasis"><strong>Attribute table</strong></span> is automatically completed with the schema
						columns.</p><p> In the <span class="emphasis"><strong>Attribute table</strong></span>, in the <span class="emphasis"><strong>Value</strong></span> field which corresponds to the
							<span class="emphasis"><em>LabelStateRecordSet</em></span>, enter the name of the column
						containing the State names to be retrieved and matched with each client,
						within double quotation marks. In this example, enter
							&#8220;<span class="emphasis"><em>LabelState</em></span>&#8221;.</p></li><li class="step" title="Step 12"><p> Double click <span class="emphasis"><strong>tFileOutputDelimited</strong></span> to set
						its properties in the <span class="emphasis"><strong>Basic settings</strong></span> tab of
						the <span class="emphasis"><strong>Component</strong></span> view. </p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_7.png"></div></li><li class="step" title="Step 13"><p> In the <span class="emphasis"><strong>File Name field</strong></span>, enter the access
						path and name of the output file.</p><p> Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the
						schema from the preceding component.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97716"></a>Executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save the Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> to run it. </p><div class="mediaobject"><img src="../images/Use_Case_tMySQLRow2_8.png"></div><p>A column containing the name of the American State corrresponding to each
						client is added to the file.</p></li></ol></div></div></div><div class="section" title="Scenario 3: Combining two flows for selective output"><div class="titlepage"><div><div><h3 class="title"><a name="andy-20121018-database-tmysqlrow-combining_two_flows_for_selective_output"></a>Scenario 3: Combining two flows for selective output </h3></div></div></div><p>In this scenario, a flow generated by <span class="emphasis"><strong>tFixedFlowInput</strong></span>
			is combined with a flow from the Mysql database. The source flow contains <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>age</em></span> fields while
			the Mysql table contains <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span>. We want to retrieve the <span class="emphasis"><em>age</em></span> data of the source flow and combine it with the <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span> records from
			the Mysql table based on <span class="emphasis"><em>id</em></span> matching. One thing that
			is worth noting is that the input schema is different from the output one at <span class="emphasis"><strong>tMysqlRow</strong></span> in the Job.</p><div class="section" title="Linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97772"></a>Linking the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop <span class="emphasis"><strong>tFixedFlowInput</strong></span>, <span class="emphasis"><strong>tMysqlRow</strong></span>, <span class="emphasis"><strong>tParseRecordSet</strong></span> and <span class="emphasis"><strong>tLogRow</strong></span>
						onto the workspace.</p></li><li class="step" title="Step 2"><p>Rename <span class="emphasis"><strong>tFixedFlowInput</strong></span> as <span class="emphasis"><strong>source_flow</strong></span>, <span class="emphasis"><strong>tMysqlRow</strong></span> as <span class="emphasis"><strong>insert_recordset</strong></span>, <span class="emphasis"><strong>tParseRecordSet</strong></span> as <span class="emphasis"><strong>parse_recordset</strong></span> and <span class="emphasis"><strong>tLogRow</strong></span>
						as <span class="emphasis"><strong>show_combined_flow</strong></span>.</p></li><li class="step" title="Step 3"><p>Link <span class="emphasis"><strong>tFixedFlowInput</strong></span> to <span class="emphasis"><strong>tMysqlRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
						connection.</p></li><li class="step" title="Step 4"><p>Link <span class="emphasis"><strong>tMysqlRow</strong></span> to <span class="emphasis"><strong>tParseRecordSet</strong></span> using a <span class="emphasis"><strong>Row</strong></span>
						&gt; <span class="emphasis"><strong>Main</strong></span> connection.</p></li><li class="step" title="Step 5"><p>Link <span class="emphasis"><strong>tParseRecordSet</strong></span> to <span class="emphasis"><strong>tLogRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
						connection.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_1.png"></div></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e97866"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tFixedFlowInput</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_2.png"></div></li><li class="step" title="Step 2"><p>Select <span class="emphasis"><strong>Use Inline Content (delimited
							file)</strong></span> in the <span class="emphasis"><strong>Mode</strong></span>
						area.</p><p>In the <span class="emphasis"><strong>Content</strong></span> field, enter the data to
						be transferred:</p><pre class="programlisting">1;30
2;20</pre></li><li class="step" title="Step 3"><p>Double-click the <span class="emphasis"><strong>[...]</strong></span> button next to
							<span class="emphasis"><strong>Edit schema</strong></span> to open the schema editor. </p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_3.png"></div><p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add two columns,
						namely <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>age</em></span>, with the type of <span class="emphasis"><em>Integer</em></span>.</p><p>Click <span class="emphasis"><strong>Ok</strong></span> to close the editor.</p></li><li class="step" title="Step 4"><p>Double-click <span class="emphasis"><strong>tMysqlRow</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_4.png"></div></li><li class="step" title="Step 5"><p>In the <span class="emphasis"><strong>Host</strong></span> and <span class="emphasis"><strong>Port</strong></span> fields, enter the connection details.</p><p>In the <span class="emphasis"><strong>Database</strong></span> field, enter the database
						name.</p><p>In the <span class="emphasis"><strong>Username</strong></span> and <span class="emphasis"><strong>Password</strong></span> fields, enter the authentication details.</p><p> In the <span class="emphasis"><strong>Query</strong></span> field, enter the SQL query
						to retrieve the <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span> data from the Mysql table <span class="emphasis"><em>employee</em></span>: <code class="code">"select id, name from employee
							WHERE id=?"</code>. </p><p>The question mark, &#8220;<code class="code">?</code>&#8221;, represents the parameter to be set in
						the <span class="emphasis"><strong>Advanced settings</strong></span> tab.</p></li><li class="step" title="Step 6"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open the schema editor.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_5.png"></div></li><li class="step" title="Step 7"><p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add two columns
						in the right part, namely <span class="emphasis"><em>recordset</em></span> and
							<span class="emphasis"><em>age</em></span>, with the type of <span class="emphasis"><em>Object</em></span> and <span class="emphasis"><em>Integer</em></span>. Note that <span class="emphasis"><em>recordset</em></span> is intended to hold the query results of the Mysql
						table, namely the <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span> fields.</p><p>Click <span class="emphasis"><strong>OK</strong></span> to close the editor.</p></li><li class="step" title="Step 8"><p>Click the <span class="emphasis"><strong>Advanced settings</strong></span> tab for
						further setup.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_6.png"></div></li><li class="step" title="Step 9"><p>Select the <span class="emphasis"><strong>Propagate QUERY's recordset</strong></span>
						check box and choose <span class="emphasis"><em>recordset</em></span> from the
							<span class="emphasis"><strong>use column</strong></span> list to insert the query
						results in that column.</p><p>Select the <span class="emphasis"><strong>Use PreparedStatement</strong></span> check
						box and define the parameter used in the query in the <span class="emphasis"><strong>Set PreparedStatement Parameters</strong></span> table.</p></li><li class="step" title="Step 10"><p>Click on the <span class="emphasis"><strong>[+]</strong></span> button to add a line. </p><p>In the <span class="emphasis"><strong>Parameter Index</strong></span> cell, enter the
						parameter position in the SQL instruction. Enter &#8220;<span class="emphasis"><em>1</em></span>&#8221; as
						we are only using one parameter in this example. </p><p>In the <span class="emphasis"><strong>Parameter Type</strong></span> cell, enter the
						type of parameter. Here, the parameter is an integer. Hence, select
							<span class="emphasis"><strong>Int</strong></span> from the list.</p><p>In the <span class="emphasis"><strong>Parameter Value</strong></span> cell, enter the
						parameter value. Here, we want to retrieve the <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span> from the
							<span class="emphasis"><em>employee</em></span> table based on the <span class="emphasis"><em>id</em></span> value from the source flow. Hence, enter
							<span class="emphasis"><em>row3.id</em></span>.</p></li><li class="step" title="Step 11"><p>Double-click <span class="emphasis"><strong>tParseRecordSet</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_7.png"></div><p>From the <span class="emphasis"><strong>Prev. Comp. Column list</strong></span>, select
						the column to parse, namely <span class="emphasis"><em>recordset</em></span>.</p></li><li class="step" title="Step 12"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open the schema editor.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_8.png"></div><p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add three columns
						in the right part, namely <span class="emphasis"><em>id</em></span>, <span class="emphasis"><em>name</em></span> and <span class="emphasis"><em>age</em></span>, with the type of <span class="emphasis"><em>Integer</em></span>, <span class="emphasis"><em>String</em></span> and <span class="emphasis"><em>Integer</em></span>. Note that the <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span> fields are
						intended to hold the parsed data of <span class="emphasis"><em>recordset</em></span>.</p><p>Click <span class="emphasis"><strong>OK</strong></span> to close the editor.</p><p>In the <span class="emphasis"><strong>Attribute table</strong></span>, in the <span class="emphasis"><strong>Value</strong></span> fields which correspond to <span class="emphasis"><em>id</em></span> and <span class="emphasis"><em>name</em></span>,
						enter the name of the column in the Mysql table to be retrieved, namely
							<span class="emphasis"><em>"id"</em></span> and <span class="emphasis"><em>"name"</em></span>.</p></li><li class="step" title="Step 13"><p>Double-click <span class="emphasis"><strong>tLogRow</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_9.png"></div><p>In the <span class="emphasis"><strong>Mode</strong></span> area, select <span class="emphasis"><strong>Table (print values in cells of a table</strong></span> for
						better display.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e98212"></a>Executing the Job </h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save the Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> to run the Job.</p><div class="mediaobject"><img src="../images/use_case_tmysqlrow3_10.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tMysqlRollback.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-databases-traditional.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tMysqlSP.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tMysqlRollback&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tMysqlSP</td></tr></table></div></body></html>