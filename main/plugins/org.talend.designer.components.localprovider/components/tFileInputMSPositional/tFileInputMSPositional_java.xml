<?xml version="1.0" encoding="UTF-8"?>

<COMPONENT>
  <HEADER AUTHOR="Talend" COMPATIBILITY="ALL" DATA_AUTO_PROPAGATE="true" HAS_CONDITIONAL_OUTPUTS="true" PLATEFORM="ALL" RELEASE_DATE="20080301A" SCHEMA_AUTO_PROPAGATE="true" SERIAL="" STARTABLE="true" STATUS="ALPHA" VERSION="0.102" LOG4J_ENABLED="true">
    <SIGNATURE/>
  </HEADER>

  <FAMILIES>
    <FAMILY>File/Input</FAMILY>
  </FAMILIES>
  <DOCUMENTATION>
    <URL/>
  </DOCUMENTATION>

  <CONNECTORS>
    <CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MULTI_SCHEMA="true"/>
	<CONNECTOR CTYPE="FLOW" NAME="REJECT" MAX_INPUT="0" MAX_OUTPUT="1" LINE_STYLE="2" COLOR="FF0000" />
	<CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="0" MAX_INPUT="1"/>
    <CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
    <CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
    <CONNECTOR CTYPE="COMPONENT_OK"/>
    <CONNECTOR CTYPE="COMPONENT_ERROR"/>
    <CONNECTOR CTYPE="RUN_IF"/>
  </CONNECTORS>

  <PARAMETERS>

	<PARAMETER FIELD="PROPERTY_TYPE" NAME="PROPERTY" SHOW="true" NUM_ROW="1" REPOSITORY_VALUE="POSITIONAL" />

	<PARAMETER FIELD="FILE" NAME="FILE_NAME" REQUIRED="true" NUM_ROW="2" REPOSITORY_VALUE="FILE_PATH">
		<DEFAULT>"__COMP_DEFAULT_FILE_DIR__/in.csv"</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="ROWSEPARATOR" FIELD="TEXT" NUM_ROW="3" REQUIRED="true" REPOSITORY_VALUE="ROW_SEPARATOR">
		<DEFAULT>"\n"</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="HEADER_RECORD_POSITION" FIELD="TEXT" NUM_ROW="5" REQUIRED="true">
		<DEFAULT>"0-3"</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="HEADER_RECORD_POSITION_LBL" FIELD="LABEL" REQUIRED="true" NUM_ROW="5" CONTEXT="0;255;0">
		<DEFAULT>start-end for example for first 3 characters: "0-3"</DEFAULT>
	</PARAMETER>

    <PARAMETER FIELD="TABLE" NAME="SCHEMAS" NB_LINES="5" NUM_ROW="6" REQUIRED="true" >
		<ITEMS>
			<ITEM NAME="SCHEMA" FIELD="SCHEMA_TYPE" />
			<ITEM NAME="HEADER" FIELD="TEXT" />
			<ITEM NAME="PATTERN" FIELD="TEXT" />
			<ITEM NAME="CHECK_ROW_SIZE" FIELD="CHECK" />
			<ITEM NAME="PARENT_ROW" FIELD="CONNECTION_LIST" FILTER="OUTPUT:FLOW_MAIN" />
			<ITEM NAME="PARENT_KEY_COLUMN" FIELD="TEXT" />
			<ITEM NAME="KEY_COLUMN" FIELD="TEXT" />
		</ITEMS>
	</PARAMETER>

	<PARAMETER NAME="HEADER" FIELD="TEXT" NUM_ROW="10" REPOSITORY_VALUE="HEADER">
		<DEFAULT>0</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="FOOTER" FIELD="TEXT" NUM_ROW="10" REPOSITORY_VALUE="FOOTER">
		<DEFAULT>0</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="LIMIT" FIELD="TEXT" NUM_ROW="10" REPOSITORY_VALUE="LIMIT">
		<DEFAULT>-1</DEFAULT>
	</PARAMETER>

	<!--
	<PARAMETER FIELD="CHECK" NAME="CAPTURE_REJECTS_INFILE" REQUIRED="false" NUM_ROW="20">
		<DEFAULT>false</DEFAULT>
	</PARAMETER>

	<PARAMETER FIELD="FILE" NAME="REJECT_FILE" REQUIRED="true" NUM_ROW="21" SHOW_IF="(CAPTURE_REJECTS_INFILE == 'true')">
		<DEFAULT>"__COMP_DEFAULT_FILE_DIR__/rejected_records.csv"</DEFAULT>
	</PARAMETER>
	-->

	<PARAMETER FIELD="CHECK" NAME="DIE_ON_ERROR" REQUIRED="true" NUM_ROW="22">
		<DEFAULT>false</DEFAULT>
	</PARAMETER>

	<PARAMETER FIELD="CHECK" NAME="DIE_ON_UNKNOWN_HEADER" REQUIRED="true" NUM_ROW="23">
		<DEFAULT>false</DEFAULT>
	</PARAMETER>

	<PARAMETER FIELD="SCHEMA_TYPE" NAME="SCHEMA_REJECT" REQUIRED="true" NUM_ROW="80" CONTEXT="REJECT" SHOW="false" READONLY="true">
      <TABLE READONLY="true">
        <COLUMN NAME="errorCode" TYPE="id_Integer" LENGTH="10" READONLY="false" CUSTOM="true"/>
        <COLUMN NAME="errorMessage" TYPE="id_String" LENGTH="255" READONLY="false" CUSTOM="true"/>
		<COLUMN NAME="line" TYPE="id_String" READONLY="false" CUSTOM="true"/>
      </TABLE>
    </PARAMETER>

  </PARAMETERS>

  <ADVANCED_PARAMETERS>
	<PARAMETER NAME="PROCESS_LONG_ROW" FIELD="CHECK" REQUIRED="true" NUM_ROW="1">
		<DEFAULT>false</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="ADVANCED_SEPARATOR" FIELD="CHECK" REQUIRED="true" NUM_ROW="2" >
		<DEFAULT>false</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="THOUSANDS_SEPARATOR" FIELD="TEXT" REQUIRED="true" NUM_ROW="2" SHOW_IF="(ADVANCED_SEPARATOR == 'true')">
		<DEFAULT>","</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="DECIMAL_SEPARATOR" FIELD="TEXT" REQUIRED="true" NUM_ROW="2" SHOW_IF="(ADVANCED_SEPARATOR == 'true')">
		<DEFAULT>"."</DEFAULT>
	</PARAMETER>

	<PARAMETER NAME="TRIMALL" FIELD="CHECK" NUM_ROW="5">
		<DEFAULT>true</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="CHECK_DATE" FIELD="CHECK" NUM_ROW="5">
		<DEFAULT>false</DEFAULT>
	</PARAMETER>

    <PARAMETER FIELD="ENCODING_TYPE" NAME="ENCODING" NUM_ROW="50" REPOSITORY_VALUE="ENCODING">
		<DEFAULT>"ISO-8859-15"</DEFAULT>
    </PARAMETER>

  </ADVANCED_PARAMETERS>

  <CODEGENERATION>
    <IMPORTS>
		<IMPORT NAME="Talen File Enhanced" MODULE="talend_file_enhanced-1.0.jar" MVN="mvn:org.talend.components.lib/talend_file_enhanced/1.0"  UrlPath="platform:/plugin/org.talend.libraries.custom/lib/talend_file_enhanced-1.0.jar" REQUIRED="true" />
	</IMPORTS>
  </CODEGENERATION>

  <RETURNS>
    <RETURN AVAILABILITY="FLOW" NAME="NB_LINE" TYPE="id_Integer"/>
	<RETURN AVAILABILITY="FLOW" NAME="NB_LINE_REJECTED" TYPE="id_Integer"/>
	<RETURN AVAILABILITY="FLOW" NAME="NB_LINE_UNKOWN_HEADER_TYPES" TYPE="id_Integer"/>
	<RETURN AVAILABILITY="FLOW" NAME="NB_LINE_PARSE_ERRORS" TYPE="id_Integer"/>
  </RETURNS>
</COMPONENT>
