<COMPONENT>
  <HEADER
    PLATEFORM="ALL"
    SERIAL=""
    VERSION="0.102"
    STATUS="ALPHA"

    COMPATIBILITY="ALL"
    AUTHOR="Talend"
    RELEASE_DATE="20070323A"
    STARTABLE="true"
    DATA_AUTO_PROPAGATE="false"
    LOG4J_ENABLED="true"
  >
    <SIGNATURE/>
  </HEADER>

  <FAMILIES>
    <FAMILY>Databases/DB Specifics/Teradata</FAMILY>
  </FAMILIES>

  <DOCUMENTATION>
    <URL/>
  </DOCUMENTATION>

  <CONNECTORS>
    <CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MAX_OUTPUT="0"/>
    <CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="1" MAX_INPUT="1"/>
    <CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
    <CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
    <CONNECTOR CTYPE="COMPONENT_OK"/>
    <CONNECTOR CTYPE="COMPONENT_ERROR"/>
    <CONNECTOR CTYPE="RUN_IF"/>
  </CONNECTORS>

  <PARAMETERS>
    <PARAMETER NAME="USE_COMMANDLINE" FIELD="RADIO" REQUIRED="true"
        NUM_ROW="1" GROUP="MODE">
        <DEFAULT>true</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="IS_VIRTUAL_COMPONENT" FIELD="RADIO" REQUIRED="true"
        NUM_ROW="2" GROUP="MODE">
        <DEFAULT>false</DEFAULT>
    </PARAMETER>
    <PARAMETER
      NAME="PROPERTY"
      FIELD="PROPERTY_TYPE"
      SHOW="true"
      NUM_ROW="3"
      REPOSITORY_VALUE="DATABASE:TERADATA"
    />

	<PARAMETER
      NAME="HOST"
      FIELD="TEXT"
      NUM_ROW="10"
      REPOSITORY_VALUE="SERVER_NAME"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="DBNAME"
      FIELD="TEXT"
      NUM_ROW="10"
      REPOSITORY_VALUE="SID"
      REQUIRED="true"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="USER"
      FIELD="TEXT"
      NUM_ROW="20"
      REPOSITORY_VALUE="USERNAME"
      REQUIRED="true"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="PASS"
      FIELD="PASSWORD"
      NUM_ROW="20"
      REPOSITORY_VALUE="PASSWORD"
      REQUIRED="true"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>
    
    <PARAMETER
      NAME="ADDITIONAL_JDBC_PARAMETERS"
      FIELD="TEXT"
      NUM_ROW="23"
      REPOSITORY_VALUE="PROPERTIES_STRING"
      SHOW_IF="IS_VIRTUAL_COMPONENT=='true'"
    >
      <DEFAULT>"TYPE=FASTEXPORT"</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="TABLE"
      FIELD="DBTABLE"
      NUM_ROW="25"
      REQUIRED="true"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

     <PARAMETER
      NAME="SCHEMA"
      FIELD="SCHEMA_TYPE"
      NUM_ROW="30"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="USE_QUERY"
      FIELD="CHECK"
      NUM_ROW="35"
      SHOW_IF="USE_COMMANDLINE=='true'"
    >
      <DEFAULT>false</DEFAULT>
    </PARAMETER>

    <PARAMETER
    	NAME="QUERY"
    	FIELD="MEMO_SQL"
    	NUM_ROW="40"
    	REQUIRED_IF="IS_VIRTUAL_COMPONENT=='true'"
    	SHOW_IF="(USE_QUERY=='true') or (IS_VIRTUAL_COMPONENT=='true')"
    >
		<DEFAULT>""</DEFAULT>
	</PARAMETER>

    <PARAMETER
      NAME="LOG_DB"
      FIELD="TEXT"
      NUM_ROW="45"
      SHOW_IF="USE_COMMANDLINE=='true'"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="LOG_TABLE"
      FIELD="TEXT"
      NUM_ROW="50"
      SHOW_IF="USE_COMMANDLINE=='true'"
    >
      <DEFAULT>""</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="SCRIPT_PATH"
      FIELD="DIRECTORY"
      NUM_ROW="55"
      SHOW_IF="USE_COMMANDLINE=='true'"
    >
      <DEFAULT>"__COMP_DEFAULT_FILE_DIR__/"</DEFAULT>
    </PARAMETER>

	<PARAMETER
      NAME="EXPORTED_FILE"
      FIELD="FILE"
      NUM_ROW="60"
      REQUIRED="true"
    >
      <DEFAULT>"__COMP_DEFAULT_FILE_DIR__/test.csv"</DEFAULT>
    </PARAMETER>

	<PARAMETER
      NAME="FIELD_SEPARATOR"
      FIELD="TEXT"
      NUM_ROW="65"
      REQUIRED="true"
    >
      <DEFAULT>";"</DEFAULT>
    </PARAMETER>

    <PARAMETER
      NAME="ROW_SEPARATOR"
      FIELD="TEXT"
      NUM_ROW="65"
      REQUIRED="true"
      SHOW_IF="IS_VIRTUAL_COMPONENT=='true'"
    >
      <DEFAULT>"\r\n"</DEFAULT>
    </PARAMETER>

 	<PARAMETER
      NAME="ERROR_FILE"
      FIELD="FILE"
      NUM_ROW="70"
      REQUIRED="true"
      SHOW_IF="USE_COMMANDLINE=='true'"
    >
      <DEFAULT>"__COMP_DEFAULT_FILE_DIR__/error.log"</DEFAULT>
    </PARAMETER>
    <PARAMETER
      NAME="TYPE"
      FIELD="TEXT"
      NUM_ROW="3"
      SHOW="false"
      REPOSITORY_VALUE="TYPE"
    >
      <DEFAULT>Teradata</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="MAPPING" FIELD="MAPPING_TYPE" NUM_ROW="110"
        SHOW="false">
        <DEFAULT>teradata_id</DEFAULT>
    </PARAMETER>

  </PARAMETERS>

  <ADVANCED_PARAMETERS>
        <PARAMETER
            NAME="CREATE_DIRECTORIES_WHEN_NEEDED"
            FIELD="CHECK"
            NUM_ROW="1"
        >
            <DEFAULT>false</DEFAULT>
        </PARAMETER>
        <PARAMETER
            NAME="DIE_WHEN_UNNORMAL_TERMINATED"
            FIELD="CHECK"
            NUM_ROW="2"
            >
            <DEFAULT>false</DEFAULT>
        </PARAMETER>
        
        <PARAMETER NAME="ADVANCED_SEPARATOR" FIELD="CHECK" REQUIRED="true" NUM_ROW="31" SHOW_IF="IS_VIRTUAL_COMPONENT=='true'">
            <DEFAULT>false</DEFAULT>
        </PARAMETER>

        <PARAMETER NAME="THOUSANDS_SEPARATOR" FIELD="TEXT" REQUIRED="true" NUM_ROW="31"
           SHOW_IF="(ADVANCED_SEPARATOR == 'true') and (IS_VIRTUAL_COMPONENT=='true')">
            <DEFAULT>","</DEFAULT>
        </PARAMETER>

        <PARAMETER NAME="DECIMAL_SEPARATOR" FIELD="TEXT" REQUIRED="true" NUM_ROW="31"
            SHOW_IF="(ADVANCED_SEPARATOR == 'true') and (IS_VIRTUAL_COMPONENT=='true')">
            <DEFAULT>"."</DEFAULT>
        </PARAMETER>
        <PARAMETER NAME="INCLUDEHEADER" FIELD="CHECK" NUM_ROW="40" SHOW_IF="IS_VIRTUAL_COMPONENT=='true'">
            <DEFAULT>false</DEFAULT>
        </PARAMETER>
        <PARAMETER NAME="FILE_EXIST_EXCEPTION" FIELD="CHECK" NUM_ROW="30" SHOW="false">
	          <DEFAULT>false</DEFAULT>
	    </PARAMETER>
    </ADVANCED_PARAMETERS>
  <CODEGENERATION>
   <TEMPLATES INPUT="In" OUTPUT="Out">

      <TEMPLATE NAME="In" COMPONENT="tTeradataInput">
        <LINK_TO NAME="Out" CTYPE="FLOW"/>
      </TEMPLATE>

      <TEMPLATE NAME="Out" COMPONENT="tFileOutputDelimited"/>

      <TEMPLATE_PARAM SOURCE="self.HOST" TARGET="In.HOST" />
      <TEMPLATE_PARAM SOURCE="self.DBNAME" TARGET="In.DBNAME" />
      <TEMPLATE_PARAM SOURCE="self.USER"   TARGET="In.USER" />
      <TEMPLATE_PARAM SOURCE="self.PASS"   TARGET="In.PASS" />
      <TEMPLATE_PARAM SOURCE="self.ADDITIONAL_JDBC_PARAMETERS" TARGET="In.PROPERTIES" />
      <TEMPLATE_PARAM SOURCE="self.TABLE"  TARGET="In.TABLE" />
      <TEMPLATE_PARAM SOURCE="self.QUERY"  TARGET="In.QUERY" />
      <TEMPLATE_PARAM SOURCE="self.SCHEMA"  TARGET="In.SCHEMA" />

      <TEMPLATE_PARAM SOURCE="self.SCHEMA"  TARGET="Out.SCHEMA" />
      <TEMPLATE_PARAM SOURCE="self.EXPORTED_FILE"  TARGET="Out.FILENAME" />
      <TEMPLATE_PARAM SOURCE="self.FIELD_SEPARATOR"  TARGET="Out.FIELDSEPARATOR" />
      <TEMPLATE_PARAM SOURCE="self.ROW_SEPARATOR"  TARGET="Out.ROWSEPARATOR" />
      <TEMPLATE_PARAM SOURCE="self.ADVANCED_SEPARATOR"  TARGET="Out.ADVANCED_SEPARATOR" />
      <TEMPLATE_PARAM SOURCE="self.THOUSANDS_SEPARATOR"  TARGET="Out.THOUSANDS_SEPARATOR" />
      <TEMPLATE_PARAM SOURCE="self.DECIMAL_SEPARATOR"  TARGET="Out.DECIMAL_SEPARATOR" />
      <TEMPLATE_PARAM SOURCE="self.INCLUDEHEADER"  TARGET="Out.INCLUDEHEADER" />
      <TEMPLATE_PARAM SOURCE="self.FILE_EXIST_EXCEPTION"   TARGET="Out.FILE_EXIST_EXCEPTION" />
    </TEMPLATES>
    <IMPORTS>
        <IMPORT NAME="Driver-Teradata" MODULE="terajdbc4-16.20.00.02.jar" MVN="mvn:com.teradata/terajdbc4/16.20.00.02"  
                REQUIRED_IF="IS_VIRTUAL_COMPONENT=='true'" />
        <IMPORT NAME="Driver-Teradata" MODULE="tdgssconfig-16.20.00.02.jar" MVN="mvn:com.teradata/tdgssconfig/16.20.00.02"  
                REQUIRED_IF="IS_VIRTUAL_COMPONENT=='true'" />
    </IMPORTS>
  </CODEGENERATION>

  <RETURNS>
  </RETURNS>
</COMPONENT>
