<?xml version="1.0" encoding="UTF-8"?>

<COMPONENT>
	<HEADER AUTHOR="Talend"
			COMPATIBILITY="ALL"
			DATA_AUTO_PROPAGATE="false"
			STARTABLE="true"
			PLATEFORM="ALL"
			RELEASE_DATE="20080229A"
			SERIAL=""
			STATUS="ALPHA"
			VERSION="0.102"
			PARTITIONING="NONE"
			LOG4J_ENABLED="true"
			>
		<SIGNATURE/>
	</HEADER>

	<FAMILIES>
		<FAMILY>Databases/DB Specifics/Greenplum</FAMILY>
	</FAMILIES>

	<DOCUMENTATION>
		<URL/>
	</DOCUMENTATION>

	<CONNECTORS>
		<CONNECTOR CTYPE="FLOW" MAX_INPUT="1" MAX_OUTPUT="1"/>
		<CONNECTOR CTYPE="ITERATE" MAX_INPUT="1" MAX_OUTPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
		<CONNECTOR CTYPE="COMPONENT_OK"/>
		<CONNECTOR CTYPE="COMPONENT_ERROR"/>
		<CONNECTOR CTYPE="RUN_IF"/>
	</CONNECTORS>

	<PARAMETERS>

		<PARAMETER
			NAME="MAPPING"
			FIELD="MAPPING_TYPE"
			NUM_ROW="18"
			SHOW="false"
		>
			<DEFAULT>postgres_id</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="PROPERTY"
			FIELD="PROPERTY_TYPE"
			NUM_ROW="1"
			REPOSITORY_VALUE="DATABASE:GREENPLUM"
		/>

		<PARAMETER
			NAME="TYPE"
			FIELD="TEXT"
			NUM_ROW="1"
			SHOW="false"
			REPOSITORY_VALUE="TYPE"
		>
			<DEFAULT>Greenplum</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="HOST"
			FIELD="TEXT"
			NUM_ROW="10"
			REPOSITORY_VALUE="SERVER_NAME"
			REQUIRED="true"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="PORT"
			FIELD="TEXT"
			NUM_ROW="10"
			REPOSITORY_VALUE="PORT"
			REQUIRED="true"
		>
			<DEFAULT>"5432"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="DBNAME"
			FIELD="TEXT"
			NUM_ROW="20"
			REPOSITORY_VALUE="SID"
			REQUIRED="true"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="SCHEMA_DB"
			FIELD="TEXT"
			NUM_ROW="20"
			REPOSITORY_VALUE="SCHEMA"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="USER"
			FIELD="TEXT"
			NUM_ROW="30"
			REPOSITORY_VALUE="USERNAME"
			REQUIRED="true"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="PASS"
			FIELD="PASSWORD"
			NUM_ROW="30"
			REPOSITORY_VALUE="PASSWORD"
			REQUIRED="true"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>
		
		<PARAMETER
			NAME="TABLE"
			FIELD="DBTABLE"
			NUM_ROW="40"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="TABLE_ACTION"
			FIELD="CLOSED_LIST"
			NUM_ROW="50"
			NOT_SHOW_IF="PARALLELIZE == 'true'"
		>
			<ITEMS DEFAULT="NONE">
				<ITEM NAME="NONE" VALUE="NONE" />
				<ITEM NAME="DROP_CREATE" VALUE="DROP_CREATE"/>
				<ITEM NAME="CREATE" VALUE="CREATE"/>
				<ITEM NAME="CREATE_IF_NOT_EXISTS" VALUE="CREATE_IF_NOT_EXISTS"/>
				<ITEM NAME="DROP_IF_EXISTS_AND_CREATE" VALUE="DROP_IF_EXISTS_AND_CREATE" />
				<ITEM NAME="CLEAR" VALUE="CLEAR"/>
				<ITEM NAME="TRUNCATE" VALUE="TRUNCATE"/>
			</ITEMS>
		</PARAMETER>

		<PARAMETER
			NAME="DATA_ACTION"
			FIELD="CLOSED_LIST"
			NUM_ROW="50"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<ITEMS DEFAULT="INSERT">
				<ITEM NAME="INSERT" VALUE="INSERT" />
				<ITEM NAME="UPDATE" VALUE="UPDATE"/>
				<ITEM NAME="MERGE" VALUE="MERGE"/>
			</ITEMS>
		</PARAMETER>

		<PARAMETER
			NAME="SCHEMA_FLOW"
			FIELD="SCHEMA_TYPE"
			NUM_ROW="60"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="DATA_FILE"
			FIELD="FILE"
			NUM_ROW="70"
			REQUIRED="true"
			SHOW_IF="(USE_NAMED_PIPE == 'false') AND (USE_EXISTING_CLT_FILE == 'false')"
		>
			<DEFAULT>"__COMP_DEFAULT_FILE_DIR__/data_file.txt"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="GUESS_COLUMN_LIST"
			FIELD="CHECK"
			NUM_ROW="72"
			REQUIRED="true"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="USE_NAMED_PIPE"
			FIELD="CHECK"
			NUM_ROW="80"
			REQUIRED="true"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="NAMED_PIPE"
			FIELD="TEXT"
			NUM_ROW="80"
			REQUIRED="true"
			SHOW_IF="USE_NAMED_PIPE == 'true'"
		>
			<DEFAULT>"gploadpipe"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="UPDATE_OPTIONS"
			FIELD="TABLE"
			REQUIRED="true"
			NUM_ROW="81"
			NB_LINES="5"
			SHOW_IF="(USE_EXISTING_CLT_FILE == 'false') AND (DATA_ACTION == 'UPDATE' OR DATA_ACTION == 'MERGE')"
		>
			<ITEMS BASED_ON_SCHEMA="true">
				<ITEM NAME="MATCH_KEY" VALUE="false" FIELD="CHECK" />
				<ITEM NAME="UPDATE_KEY" VALUE="false" FIELD="CHECK" />
			</ITEMS>
		</PARAMETER>

		<PARAMETER
			NAME="UPDATE_CONDITION"
			FIELD="TEXT"
			REQUIRED="true"
			NUM_ROW="82"
			SHOW_IF="(USE_EXISTING_CLT_FILE == 'false') AND (DATA_ACTION == 'UPDATE' OR DATA_ACTION == 'MERGE')"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="DIE_ON_ERROR"
			FIELD="CHECK"
			NUM_ROW="90"
			REQUIRED="false"
		>
			<DEFAULT>true</DEFAULT>
		</PARAMETER>

	</PARAMETERS>




	<ADVANCED_PARAMETERS>
		<PARAMETER
			NAME="DB_DRIVER"
			FIELD="CLOSED_LIST"
			NUM_ROW="5"
		>
			<ITEMS DEFAULT="GREENPLUM">
				<ITEM NAME="POSTGRESQL" VALUE="POSTGRESQL" />
				<ITEM NAME="GREENPLUM" VALUE="GREENPLUM"/>
			</ITEMS>
		</PARAMETER>
		
		<PARAMETER
			NAME="ADDITIONAL_PARAMETERS"
			FIELD="TEXT"
			NUM_ROW="8"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="USE_EXISTING_CLT_FILE"
			FIELD="CHECK"
			NUM_ROW="10"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="CLT_FILE"
			FIELD="FILE"
			NUM_ROW="10"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'true'"
		>
			<DEFAULT>"__COMP_DEFAULT_FILE_DIR__/gpload.ctl"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="CSV_OPTIONS"
			FIELD="CHECK"
			NUM_ROW="11"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="FIELD_SEPARATOR"
			FIELD="TEXT"
			NUM_ROW="20"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>"|"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="ESCAPE_CHAR"
			FIELD="TEXT"
			NUM_ROW="20"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>"\\"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="QUOTE_CHAR"
			FIELD="TEXT"
			NUM_ROW="20"
			REQUIRED="true"
			SHOW_IF="(USE_EXISTING_CLT_FILE == 'false') AND (CSV_OPTIONS == 'true')"
		>
			<DEFAULT>"\""</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="HEADER_ROW"
			FIELD="CHECK"
			NUM_ROW="30"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>


		<PARAMETER
			NAME="OPTIONS"
			FIELD="TABLE"
			NUM_ROW="40"
			NB_LINES="4"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<ITEMS>
				<ITEM NAME="KEY" FIELD="CLOSED_LIST" >
					<ITEMS DEFAULT="LOCAL_HOSTNAME">
						<ITEM NAME="LOCAL_HOSTNAME" VALUE="LOCAL_HOSTNAME"/>
						<ITEM NAME="PORT" VALUE="PORT"/>
						<ITEM NAME="PORT_RANGE" VALUE="PORT_RANGE"/>
						<ITEM NAME="SSL" VALUE="SSL" />
						<ITEM NAME="CERTIFICATES_PATH" VALUE="CERTIFICATES_PATH" />
						<ITEM NAME="NULL_AS" VALUE="NULL_AS"/>
						<ITEM NAME="FORCE_NOT_NULL" VALUE="FORCE_NOT_NULL"/>
						<ITEM NAME="ERROR_LIMIT" VALUE="ERROR_LIMIT"/>
						<ITEM NAME="ERROR_TABLE" VALUE="ERROR_TABLE"/>
						<ITEM NAME="LOG_ERRORS" VALUE="LOG_ERRORS"/>
						<ITEM NAME="MAX_LINE_LENGTH" VALUE="MAX_LINE_LENGTH"/>
						<ITEM NAME="EXTERNAL_SCHEMA" VALUE="EXTERNAL_SCHEMA"/>
						<ITEM NAME="PRELOAD_TRUNCATE" VALUE="PRELOAD_TRUNCATE"/>
						<ITEM NAME="PRELOAD_REUSE_TABLES" VALUE="PRELOAD_REUSE_TABLES"/>
						<ITEM NAME="PRELOAD_STAGING_TABLE" VALUE="PRELOAD_STAGING_TABLE"/>
						<ITEM NAME="PRELOAD_FAST_MATCH" VALUE="PRELOAD_FAST_MATCH"/>
						<ITEM NAME="SQL_BEFORE" VALUE="SQL_BEFORE"/>
						<ITEM NAME="SQL_AFTER" VALUE="SQL_AFTER"/>
					</ITEMS>
				</ITEM>
				<ITEM NAME="VALUE" FIELD="TEXT"/>
			</ITEMS>
		</PARAMETER>

		<!--
		<PARAMETER
			NAME="NOTE"
			FIELD="LABEL"
			NUM_ROW="2"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>*Note: recommended parameters: -dateStyle YMD -timeStyle 24HOUR"</DEFAULT>
		</PARAMETER>
		-->

		<PARAMETER
			NAME="LOG_FILE"
			FIELD="TEXT"
			NUM_ROW="41"
			REQUIRED="true"
		>
			<DEFAULT>"gpload.log"</DEFAULT>
		</PARAMETER>
		<!--
		<PARAMETER
			NAME="HAS_BEFORE_SQL"
			FIELD="CHECK"
			NUM_ROW="42"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="BEFORE_SQL"
			FIELD="TEXT"
			NUM_ROW="43"
			REQUIRED="true"
			SHOW_IF="(USE_EXISTING_CLT_FILE == 'false') AND (HAS_BEFORE_SQL == 'true')"
		>
			<DEFAULT>"INSERT INTO audit VALUES('start', current_timestamp)"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="HAS_AFTER_SQL"
			FIELD="CHECK"
			NUM_ROW="44"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="AFTER_SQL"
			FIELD="TEXT"
			NUM_ROW="45"
			REQUIRED="true"
			SHOW_IF="(USE_EXISTING_CLT_FILE == 'false') AND (HAS_AFTER_SQL == 'true')"
		>
			<DEFAULT>"INSERT INTO audit VALUES('end', current_timestamp)"</DEFAULT>
		</PARAMETER>
		-->

		<PARAMETER
			NAME="ENCODING"
			FIELD="TEXT"
			NUM_ROW="50"
			REQUIRED="true"
			SHOW_IF="USE_EXISTING_CLT_FILE == 'false'"
		>
			<DEFAULT>"SQL_ASCII"</DEFAULT>
		</PARAMETER>
		
		
		
		<PARAMETER
			NAME="GPLOAD_UTILITY"
			FIELD="CLOSED_LIST"
			NUM_ROW="55"
			REQUIRED="true"
		>
			<ITEMS DEFAULT="GPLOAD">
				<ITEM NAME="GPLOAD" VALUE="GPLOAD" />
				<ITEM NAME="GPLOADPY" VALUE="GPLOADPY"/>
			</ITEMS>
		</PARAMETER>
		
		
		<PARAMETER
			NAME="SPECIFY_GPLOAD_PATH"
			FIELD="CHECK"
			NUM_ROW="60"
			SHOW_IF="GPLOAD_UTILITY=='GPLOAD'"
			REQUIRED="true"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="GPLOAD_PATH"
			FIELD="FILE"
			NUM_ROW="65"
			SHOW_IF="(SPECIFY_GPLOAD_PATH == 'true') AND (GPLOAD_UTILITY=='GPLOAD')"
			REQUIRED="true"
		>
			<DEFAULT>"gpload.exe"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="SPECIFY_PYTHON_PATH"
			FIELD="CHECK"
			NUM_ROW="70"
			SHOW_IF="GPLOAD_UTILITY=='GPLOADPY'"
			REQUIRED="true"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="PYTHON_PATH"
			FIELD="FILE"
			NUM_ROW="75"
			SHOW_IF="(SPECIFY_PYTHON_PATH == 'true') AND (GPLOAD_UTILITY=='GPLOADPY')"
			REQUIRED="true"
		>
			<DEFAULT>"python"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER
			NAME="SPECIFY_GPLOADPY_PATH"
			FIELD="CHECK"
			NUM_ROW="80"
			SHOW_IF="GPLOAD_UTILITY=='GPLOADPY'"
			REQUIRED="true"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="GPLOADPY_PATH"
			FIELD="FILE"
			NUM_ROW="85"
			SHOW_IF="(SPECIFY_GPLOADPY_PATH == 'true') AND (GPLOAD_UTILITY=='GPLOADPY')"
			REQUIRED="true"
		>
			<DEFAULT>"gpload.py"</DEFAULT>
		</PARAMETER>

		<PARAMETER
			NAME="REMOVE_DATAFILE"
			FIELD="CHECK"
			NUM_ROW="90"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER
			NAME="USE_GZIP_COMPRESSION"
			FIELD="CHECK"
			NUM_ROW="95"
		>
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

	</ADVANCED_PARAMETERS>

	<CODEGENERATION>
		<IMPORTS>
			<IMPORT MODULE="namedpipe-1.0.jar" MVN="mvn:org.talend.libraries/namedpipe-1.0/6.0.0"  NAME="namedpipe-1.0.jar" REQUIRED="true"/>
			<IMPORT NAME="Postgres-Driver"
			MODULE="postgresql-8.4-703.jdbc4.jar" MVN="mvn:postgresql/postgresql/8.4-703.jdbc4"  REQUIRED_IF="DB_DRIVER =='POSTGRESQL'" />
			<IMPORT NAME="Greenplum-Driver" MODULE="greenplum-5.1.4.000275.jar" MVN="mvn:com.pivotal/greenplum/5.1.4.000275" REQUIRED_IF="DB_DRIVER =='GREENPLUM'"/>
			<IMPORT MODULE="namedpipe_jni_64bit.dll" MVN="mvn:org.talend.libraries/namedpipe_jni_64bit/6.0.0/dll"  NAME="namedpipe_jni_64bit.dll" REQUIRED="false"/>
			<IMPORT MODULE="namedpipe_jni.dll" MVN="mvn:org.talend.libraries/namedpipe_jni/6.0.0/dll"  NAME="namedpipe_jni.dll" REQUIRED="false"/>
		</IMPORTS>
	</CODEGENERATION>

	<RETURNS>
		<RETURN AVAILABILITY="AFTER" NAME="NB_LINE" TYPE="id_Integer"/>
		<RETURN AVAILABILITY="AFTER" NAME="EXIT_CODE" TYPE="id_Integer"/>
		<RETURN AVAILABILITY="AFTER" NAME="GPLOAD_OUTPUT" TYPE="id_String"/>
		<RETURN AVAILABILITY="AFTER" NAME="NB_LINE_INSERTED" TYPE="id_Integer"/>
		<RETURN AVAILABILITY="AFTER" NAME="NB_LINE_UPDATED" TYPE="id_Integer"/>
		<RETURN AVAILABILITY="AFTER" NAME="NB_DATA_ERRORS" TYPE="id_Integer"/>
		<RETURN AVAILABILITY="AFTER" NAME="STATUS" TYPE="id_String"/>
		<RETURN AVAILABILITY="AFTER" NAME="RUNTIME" TYPE="id_String"/>
	</RETURNS>
</COMPONENT>
