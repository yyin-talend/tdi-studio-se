<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMySQLInvalidRows</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-dataquality.html" title="Chapter&nbsp;6.&nbsp;Data Quality components"><link rel="prev" href="tMultiPatternCheck.html" title="tMultiPatternCheck"><link rel="next" href="tMySQLValidRows.html" title="tMySQLValidRows"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tMySQLInvalidRows</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tMultiPatternCheck.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Data Quality components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tMySQLValidRows.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tMySQLInvalidRows"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMySQLInvalidRows"></a>tMySQLInvalidRows</h2></div></div></div><div class="mediaobject"><img src="../images/tMySQLInvalidRows_icon32_white.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This component will be available in the <span class="emphasis"><strong>Palette</strong></span> of
			the studio on the condition that you have subscribed to any <span class="emphasis"><em>Talend Platform</em></span> product.</p></div><div class="section" title="tMySQLInvalidRows properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e99776"></a>tMySQLInvalidRows properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Data Quality</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tMySQLInvalidRows</strong></span> checks database
								rows against specific <span class="emphasis"><em>Talend Data Quality</em></span> database patterns or data
								quality rules (business rules).</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tMySQLInvalidRows</strong></span> allows you to
								extract DB rows that do not match a given data quality pattern or
								rule. You can then implement any required correction.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Validation type</em></span>
							</p>
						</td><td valign="top">
							<p>Either <span class="emphasis"><strong>Regex pattern validation</strong></span>
								or <span class="emphasis"><strong>DQ rule validation</strong></span>.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">
							<p><span class="emphasis"><strong>Regex pattern validation</strong></span>:
								Validate data in the database against regex patterns.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">
							<p><span class="emphasis"><strong>DQ rule validation</strong></span>: Validate data
								in the database against DQ rules.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Property type</em></span>
							</p>
						</td><td valign="top">
							<p>Either <span class="emphasis"><strong>Built-in</strong></span> or <span class="emphasis"><strong>Repository</strong></span>.</p>
						</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: No property data stored
								centrally.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: Select the repository
								file where Properties are stored. The fields that come after are
								pre-filled in using the fetched data.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>DB Version</em></span>
							</p>
						</td><td valign="top">Select the MySQL version you are using.</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use an existing connection</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box and in the <span class="emphasis"><strong>Component List</strong></span> click the
		relevant connection component to reuse the connection details you already defined.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When a Job contains the parent Job and the child Job, if you need to share an existing
			connection between the two levels, for example, to share the connection created by the
			parent Job with the child Job, you have to: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the parent level, register the DB connection to be shared in the
							<span class="emphasis"><strong>Basic settings</strong></span> view of the connection
						component which creates that very DB connection.</p></li><li class="listitem"><p>In the child level, use a dedicated connection component to read that
						registered DB connection.</p></li></ol></div><p>For an example about how to share a DB connection across Job levels,see
					<span class="emphasis"><em>Talend Data Integration Studio
				User Guide</em></span>.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Host</em></span>
							</p>
						</td><td valign="top">
							<p>Database server IP address.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Port</em></span>
							</p>
						</td><td valign="top">
							<p>Listening port number of DB server.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Database</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the database.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Username</em></span> and
								<span class="emphasis"><em>Password</em></span></p>
						</td><td valign="top">
							<p>DB user authentication data.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
								Schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields to be processed and passed on to the next component. The
								schema is either built-in or remotely stored in the Repository.
							</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: You create and store
								the schema locally for this component only. Related topic: see
									<span class="emphasis"><em>Talend Data Integration Studio User
									Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: You have already
								created the schema and stored it in the Repository and thus reuse it
								when needed. Related topic: see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Table Name</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the name of the table to be read.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Where clause</em></span>
							</p>
						</td><td valign="top">
							<p>Enter a WHERE clause to define a row filter on the table.</p>
							<p>You can use the WHERE clause to filter the rows you want to
								analyze in the table. This WHERE clause enables you then to retrieve
								valid and invalid data that match certain specified criteria or
								conditions.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>Regex pattern
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Analyzed column</em></span>
							</p>
						</td><td valign="top">
							<p>Select from the schema list the column to analyze. </p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>Regex pattern
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Custom pattern</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to define manually your own customized
								regular expression against which you want to check the DB
								rows.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>Regex pattern
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Patterns list</em></span>
							</p>
						</td><td valign="top">
							<p>Select from the pattern list the pattern against which you want to
								check the DB rows.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>DQ rule
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>DQ rule list</em></span>
							</p>
						</td><td valign="top">
							<p>Select from the list the rule against which you want to check the
								DB rows.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>DQ rule
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Query type</em></span>
							</p>
						</td><td valign="top">
							<p>Either <span class="emphasis"><strong>Built-in</strong></span> or <span class="emphasis"><strong>Repository</strong></span>:</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: Fill in manually the
								query statement or build it graphically using SQLBuilder.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: Select the relevant
								query stored in the Repository. The Query field are filled in
								accordingly.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>DQ rule
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Guess Query</em></span>
							</p>
						</td><td valign="top">
							<p>Click the <span class="emphasis"><strong>Guess Query</strong></span> button to
								generate the query which corresponds to your table schema in the
									<span class="emphasis"><strong>Query</strong></span> field.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>DQ rule
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Guess schema</em></span>
							</p>
						</td><td valign="top">
							<p>Click the <span class="emphasis"><strong>Guess Schema</strong></span> button to
								retrieve the schema from the table.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> Available only for <span class="emphasis"><strong>DQ rule
										validation</strong></span>.</p></div>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Query</em></span>
							</p>
						</td><td valign="top">
							<p>Enter your DB query paying particular attention to properly
								sequence the fields in order to match the schema definition.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Advanced settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Additional JDBC Parameters</em></span>
							</p>
						</td><td valign="top">
							<p>Specify additional connection properties for the DB connection you
								are creating. This option is not available if you have selected the
									<span class="emphasis"><strong>Use an existing connection</strong></span>
								check box in the <span class="emphasis"><strong>Basic
								settings</strong></span>.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can press <span class="emphasis"><strong>Ctrl+Space</strong></span> to
									access a list of predefined global variables.</p></div>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Enable stream</em></span>
							</p>
						</td><td valign="top">Select this check box to enables streaming over
							buffering. This allows reading from large tables without consuming large
							amount of memory in order to optimize the performance.</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Trim all the String/Char columns</em></span>
							</p>
						</td><td valign="top">Select this check box to remove leading and trailing
							whitespace from all the String/Char columns.</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Trim column</em></span>
							</p>
						</td><td valign="top">
							<p>Remove leading and trailing whitespace from the defined
								columns.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Clear the <span class="emphasis"><strong>Trim all the String/Char
										columns</strong></span> to enable <span class="emphasis"><strong>Trim
										column</strong></span>.</p></div>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStatCatcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to collect log data at the component
								level.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Dynamic settings</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add a row in the table and fill
		the <span class="emphasis"><strong>Code</strong></span> field with a context variable to choose your
		database connection dynamically from multiple connections planned in your Job. This feature
		is useful when you need to access database tables having the same data structure but in
		different databases, especially when you are working in an environment where you cannot
		change your Job settings, for example, when your Job has to be deployed and executed
		independent of <span class="emphasis"><strong>Talend</strong></span> Studio.</p>
							<p>The <span class="emphasis"><strong>Dynamic settings</strong></span> table is available only when the
			<span class="emphasis"><strong>Use an existing connection</strong></span> check box is selected in the
			<span class="emphasis"><strong>Basic settings</strong></span> view. When a dynamic parameter is
		defined, the <span class="emphasis"><strong>Component List</strong></span> box in the <span class="emphasis"><strong>Basic settings</strong></span> view becomes unusable. </p>
							<p>For more information on <span class="emphasis"><strong>Dynamic settings</strong></span> and context
		variables, see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component can be used as a start or intermediary step. It
								requires an output flow.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Limitation</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>n/a</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario: Reading email addresses from a DB table and retrieving specific data including invalid rows"><div class="titlepage"><div><div><h3 class="title"><a name="Raa46471"></a>Scenario: Reading email addresses from a DB table and retrieving specific data
			including invalid rows</h3></div></div></div><p>This scenario is a two-component Job created in <span class="emphasis"><em>Talend Data Integration Studio</em></span>. In
			this Job, <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> reads the email addresses
			for people from a specific country from a MySQL database table, filters data using a
			WHERE clause to narrow down the validation process, checks the email values against the
			given <span class="emphasis"><em>Talend Data Quality</em></span> email pattern and finally extracts
			filtered data including the invalid rows and displays them on the console.</p><p>Below is the database table used in this example, some customers are from the USA and
			others are from Canada. The <span class="emphasis"><em>Email</em></span> column contains some invalid
			addresses. The <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> component filters data
			in the <span class="emphasis"><em>Email</em></span> column to read only the emails for the customers from
			the USA, and then validates these email addresses against the
				<span class="emphasis"><em>EmailAddress</em></span> pattern.</p><div class="mediaobject"><img src="../images/use_case_tmysqlinvalidrows.png"></div><p>In this scenario, we have already stored the schemas of the input table in the
			Repository. For more information about storing schema metadata in the <span class="emphasis"><strong>Repository</strong></span> tree view, see <span class="emphasis"><em>Talend Data Integration Studio User
				Guide</em></span>.</p><div class="procedure" title="Procedure&nbsp;6.7.&nbsp;Setting up your Job"><a name="d0e100629"></a><p class="title"><b>Procedure&nbsp;6.7.&nbsp;Setting up your Job</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the <span class="emphasis"><strong>Repository</strong></span> tree view, expand in
					succession the <span class="emphasis"><strong>Metadata</strong></span> and the <span class="emphasis"><strong>DB Connections</strong></span> nodes where you have stored the input
					schemas and drop the relevant connection onto the design workspace.</p><p> The <span class="emphasis"><strong>[Components]</strong></span> dialog box displays.</p><div class="mediaobject"><img src="../images/use_case_tmysqlinvalidrows2.png"></div></li><li class="step" title="Step 2"><p>Select <span class="emphasis"><strong>tMySQLInvalidRows </strong></span>from the list and
					click <span class="emphasis"><strong>OK</strong></span> to close the dialog box.</p><p> The <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> component displays on
					the workspace. The MySQL table used in this scenario is called
						<span class="emphasis"><em>customers</em></span>. It holds the customers'
						<span class="emphasis"><em>customer_id, account_num, Iname, fname, country </em></span>and
						<span class="emphasis"><em>Email</em></span> columns.</p></li><li class="step" title="Step 3"><p>Drop <span class="emphasis"><strong>tLogRow</strong></span> from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace.</p></li><li class="step" title="Step 4"><p>Connect the two components together using the <span class="emphasis"><strong>Main</strong></span> link.</p><div class="mediaobject"><img src="../images/use_case_tmysqlinvalidrows1.png"></div></li></ol></div><div class="procedure" title="Procedure&nbsp;6.8.&nbsp;Setting up the schema"><a name="d0e100693"></a><p class="title"><b>Procedure&nbsp;6.8.&nbsp;Setting up the schema</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> to display its
						<span class="emphasis"><strong>Basic settings</strong></span> view and define its
					properties.</p><div class="mediaobject"><img src="../images/use_case_tmysqlinvalidrows3.png"></div><p>All database connection fields are automatically filled in. If you do not
					define your input files in the Repository, fill in the details manually after
					selecting <span class="emphasis"><strong>Built-in</strong></span> in the <span class="emphasis"><strong>Property Type</strong></span> field</p></li><li class="step" title="Step 2"><p>From the <span class="emphasis"><strong>Validation type</strong></span> list, select
						<span class="emphasis"><em>Regex pattern validation</em></span>.</p><p>This will validate data in the selected rows against a regex pattern. For an
					example scenario about validating data against DQ rule, see <a class="xref" href="tMySQLInvalidRows.html#ychen-20120418-data_quality-tmysqlinvalidrows_dq_rule" title="Scenario 2: Checking customer table against a given DQ rule to select customer records">the section called &#8220;Scenario 2: Checking customer table against a given DQ rule to select customer
			records&#8221;</a>.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Table Name</strong></span> field, type in the name of
					the database table on which you want to run the Job,
						<span class="emphasis"><em>customer1</em></span> in this example.</p></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Where clause</strong></span> field, type in the WHERE
					clause that will restrict the number of the analyzed rows.</p><p>In this example you want to examine only the emails of the customers from the
					USA.</p></li><li class="step" title="Step 5"><p>In the <span class="emphasis"><strong>Analyzed column</strong></span> list, select the
					column you want to analyze, <span class="emphasis"><em>Email </em></span>in this example.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Patterns list</strong></span>, select the <span class="emphasis"><em>Talend Data Quality</em></span> database pattern against which you want
					to check addresses from the <span class="emphasis"><em>Email</em></span> column, <span class="emphasis"><em>Email
						Address</em></span> in this example.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you select the <span class="emphasis"><strong>Custom pattern</strong></span> check
						box, you can customize the regular expression against which the data is to
						be checked.</p></div></li><li class="step" title="Step 7"><p>Double click <span class="emphasis"><strong>tLogRow</strong></span> to open its <span class="emphasis"><strong>Basic settings</strong></span> view and define its properties as
					needed.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;6.9.&nbsp;Executing the Job"><a name="d0e100785"></a><p class="title"><b>Procedure&nbsp;6.9.&nbsp;Executing the Job</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Save your Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> to execute it.</p><div class="mediaobject"><img src="../images/use_case_tmysqlinvalidrows4.png"></div><p>The <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> component analyzed the
					email addresses only for customers from the USA in the database table against
					the selected SQL pattern (<span class="emphasis"><em>Email Address</em></span>), and then it
					extracted all filtered data including the invalid email addresses.</p></li></ol></div></div><div class="section" title="Scenario 2: Checking customer table against a given DQ rule to select customer records"><div class="titlepage"><div><div><h3 class="title"><a name="ychen-20120418-data_quality-tmysqlinvalidrows_dq_rule"></a>Scenario 2: Checking customer table against a given DQ rule to select customer
			records</h3></div></div></div><p>This scenario is a three-component Job that checks a MySQL customer table against a
			given data quality rule so as to query specific customer records.</p><div class="mediaobject" align="center"><img src="../images/use_case-tmysqlinvalidrows-dq_rules1.png" align="middle"></div><p>These components used in the Job are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><strong>tMysqlConnection</strong></span>: this component creates the
					connection to the MySQL database of interest so that the other components can
					reuse it.</p></li><li class="listitem"><p><span class="emphasis"><strong>tMySQLInvalidRows</strong></span>: this component reuses the
					connection created by <span class="emphasis"><strong>tMysqlConnection</strong></span> and
					query the customer records of interest against the given data quality
					rule.</p></li><li class="listitem"><p><span class="emphasis"><strong>tLogRow</strong></span>: this component presents the result
					of running this Job.</p></li></ul></div><p>To replicate this scenario, proceed as illustrated in the following sections:</p><div class="section" title="Dropping and linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e100839"></a>Dropping and linking the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>From the <span class="emphasis"><strong>Palette</strong></span>, drop <span class="emphasis"><strong>tMysqlConnection</strong></span>, <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> and <span class="emphasis"><strong>tLogRow</strong></span> onto the design workspace.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can label any component in the workspace the way you need. For
							further information about how to label a component, see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p></div></li><li class="step" title="Step 2"><p>Right-click <span class="emphasis"><strong>tMysqlConnection</strong></span> and select
						the <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>OnSubjobOk</strong></span> link to connect this component to <span class="emphasis"><strong>tMySQLInvalidRows</strong></span>.</p></li><li class="step" title="Step 3"><p>Repeat this operation but select the <span class="emphasis"><strong>Row</strong></span>
						&gt; <span class="emphasis"><strong>Main</strong></span> link to connect <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> to <span class="emphasis"><strong>tLogRow</strong></span>.</p></li></ol></div></div><div class="section" title="Configuring the connection to the database"><div class="titlepage"><div><div><h4 class="title"><a name="d0e100894"></a>Configuring the connection to the database</h4></div></div></div><p>To configure the connection to the MySQL database of interest, proceed as
				follows:</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tMysqlConnection</strong></span> to open its
							<span class="emphasis"><strong>Component</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case-tmysqlinvalidrows-dq_rules2.png" align="middle"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>DB version</strong></span> field, select the
						version of your MySQL database. It is <span class="emphasis"><strong>Mysql
							5</strong></span> in this example.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Host</strong></span> field, type in the server IP
						address of the database to which you want to connect, <span class="emphasis"><em>localhost</em></span> in this example.</p></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Port</strong></span> field, type in the port
						number of the database to which you want to connect, <span class="emphasis"><em>3306</em></span> in this example.</p></li><li class="step" title="Step 5"><p>In the <span class="emphasis"><strong>Database</strong></span> field, enter the name of
						the database in which you need to check the customer table, <span class="emphasis"><em>crm</em></span> in this example.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Username</strong></span> and the <span class="emphasis"><strong>Password</strong></span> fields, enter the authentication
						information to connect to the database of interest.</p></li></ol></div></div><div class="section" title="Configuring the query of the customer records of interest"><div class="titlepage"><div><div><h4 class="title"><a name="d0e100957"></a>Configuring the query of the customer records of interest</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tMySQLInvalidRows</strong></span> to open
						its <span class="emphasis"><strong>Component</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case-tmysqlinvalidrows-dq_rules3.png" align="middle"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Validation type</strong></span> field, select
							<span class="emphasis"><strong>DQ rule validation</strong></span> in order to use the
						given data quality rule.</p></li><li class="step" title="Step 3"><p>Select <span class="emphasis"><strong>Use an existing connection</strong></span> to
						reuse the connection that <span class="emphasis"><strong>tMysqlConnection</strong></span>
						creates.</p></li><li class="step" title="Step 4"><p> Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open the schema editor.</p><div class="mediaobject" align="center"><img src="../images/use_case-tmysqlinvalidrows-dq_rules4.png" align="middle"></div></li><li class="step" title="Step 5"><p>Click the <span class="emphasis"><strong>[+]</strong></span> button three times to add
						throw rows and rename them as <span class="emphasis"><em>Name</em></span>,
							<span class="emphasis"><em>DOB</em></span> and <span class="emphasis"><em>Email</em></span>, respectively.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><em>DOB</em></span> row, select <span class="emphasis"><strong>VARCHAR</strong></span> in the <span class="emphasis"><strong>DB
							type</strong></span> column, enter <span class="emphasis"><em>19</em></span> in
						the <span class="emphasis"><strong>Length</strong></span> column and <span class="emphasis"><em>0</em></span> in the <span class="emphasis"><strong>Precision</strong></span> column.</p></li><li class="step" title="Step 7"><p>Click <span class="emphasis"><strong>OK</strong></span> to validate these changes and
						accept the propagation prompted by the pop-up dialog box.</p></li><li class="step" title="Step 8"><p>In the <span class="emphasis"><strong>Table name</strong></span> field, enter or browse
						to the database table to be checked, <span class="emphasis"><em>cust</em></span>
						in this example.</p></li><li class="step" title="Step 9"><p>In the <span class="emphasis"><strong>Where clause</strong></span> field, type in the
						where clause to be used, in addition to the given data quality rule, to
						query the customer data of interest. In this scenario, enter
							<code class="code">`cust`.`Email` like 's%'</code> within the quotation marks to
						retrieve the email records beginning with the letter <span class="emphasis"><em>s</em></span> or <span class="emphasis"><em>S</em></span>.</p></li><li class="step" title="Step 10"><p>In the <span class="emphasis"><strong>DQ rule list</strong></span> field, select the
						data quality rule to be used. In this scenario, select <span class="emphasis"><em>cust_age</em></span>. This rule is a demo rule reading
						</p><pre class="programlisting"><code class="code">18&lt;=((TO_DAYS(NOW())-TO_DAYS(DOB))/365)</code></pre><p>
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can check the available data quality rules in <span class="emphasis"><strong>Libraries &gt; Rules &gt; SQL</strong></span> of the <span class="emphasis"><strong>DQ Repository</strong></span>. The <span class="emphasis"><em>cust_age</em></span> rule can be imported from the <span class="emphasis"><strong>TDQEEDEMOJAVA</strong></span> project.</p><div class="mediaobject" align="center"><img src="../images/use_case-tmysqlinvalidrows-dq_rules6.png" align="middle"></div><p>For further information about the <span class="emphasis"><strong>DQ
								Repository</strong></span> and its items and about how to import the data
							quality demo project, see the <span class="emphasis"><em>Talend Data Quality User
								Guide</em></span></p></div></li><li class="step" title="Step 11"><p>Click <span class="emphasis"><strong>Guess Query</strong></span> to generate the
						corresponding query clause that uses the Not clause.</p></li><li class="step" title="Step 12"><p>In the <span class="emphasis"><strong>Query</strong></span> field, change <span class="emphasis"><em>18</em></span> to <span class="emphasis"><em>20</em></span> to
						modify the clause as the following:</p><pre class="programlisting"><code class="code">"SELECT `Name`, `DOB`, `Email` FROM `crm`.`cust` 
  WHERE (NOT ( 20&gt;((TO_DAYS(NOW())-TO_DAYS(DOB))/365) )
  AND `cust`.`Email` like 's%')"</code></pre><p>This clause allows you to select the customers whose ages count <span class="emphasis"><em>20</em></span> or more.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e101136"></a>Executing the Job </h4></div></div></div><p>The <span class="emphasis"><strong>tLogRow</strong></span> component presents the execution
				result of the Job. You can configure the presentation mode on its <span class="emphasis"><strong>Component</strong></span> view.</p><p>To do this, double-click <span class="emphasis"><strong>tLogRow</strong></span> to open the
					<span class="emphasis"><strong>Component</strong></span> view and in the <span class="emphasis"><strong>Mode</strong></span> area, select the <span class="emphasis"><strong>Table (print values in
					cells of a table)</strong></span> option.</p><div class="procedure"><ul class="procedure"><li class="step" title="Step 1"><p>To execute this Job, press <span class="emphasis"><strong>F6</strong></span>.</p></li></ul></div><p>Once done, the <span class="emphasis"><strong>Run</strong></span> view is opened automatically,
				where you can check the execution result.</p><div class="mediaobject" align="center"><img src="../images/use_case-tmysqlinvalidrows-dq_rules5.png" align="middle"></div><p>You can read that the customer records beginning with the letter S are retrieved
				and their ages are all more than 20.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tMultiPatternCheck.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-dataquality.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tMySQLValidRows.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tMultiPatternCheck&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tMySQLValidRows</td></tr></table></div></body></html>