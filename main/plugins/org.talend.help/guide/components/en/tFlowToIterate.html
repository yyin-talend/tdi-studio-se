<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFlowToIterate</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-orchestration.html" title="Chapter&nbsp;17.&nbsp;Orchestration components"><link rel="prev" href="ch-orchestration.html" title="Chapter&nbsp;17.&nbsp;Orchestration components"><link rel="next" href="tForeach.html" title="tForeach"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tFlowToIterate</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-orchestration.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;17.&nbsp;Orchestration components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tForeach.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tFlowToIterate"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFlowToIterate"></a>tFlowToIterate</h2></div></div></div><div class="mediaobject"><img src="../images/tFlowToIterate_icon32_white.png"></div><div class="section" title="tFlowToIterate Properties"><div class="titlepage"><div><div><h3 class="title"><a name="Raa10470"></a>tFlowToIterate Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top"><p><span class="emphasis"><strong>Component
                                family</strong></span></p>
                        </td><td valign="top"><p>Orchestration</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top"><p><span class="emphasis"><strong>tFlowToIterate</strong></span> iterates on the input data and
                                generates global variables. </p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top"><p>This component is used to
                                read data line by line from the input flow and store the data
                                entries in iterative global variables.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Basic
                                settings</strong></span></p>
                        </td><td valign="top"><p><span class="emphasis"><em>Use the default (key, value) in global
                                    variables</em></span></p>
                        </td><td valign="top"><p>When selected, the system uses the default value
                                of the global variable in the current Job.</p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td valign="top"><p><span class="emphasis"><em>Customize</em></span></p>
                        </td><td valign="top"><p><span class="emphasis"><strong>key</strong></span>: Type in a
                                name for the new global variable. Press <span class="emphasis"><strong>Ctrl+Space</strong></span> to access all available variables either
                                global or user-defined.</p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td><p>&nbsp;</p>
                        </td><td valign="top"><p><span class="emphasis"><strong>value</strong></span>: Click in
                                the cell to access a list of the columns attached to the defined
                                global variable.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top"><p>You cannot use this
                                component as a start component. <span class="emphasis"><strong>tFlowToIterate
                                </strong></span>requires an output component.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Global
                                Variables</strong></span></p>
                        </td><td><p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Number of Lines</strong></span>: Indicates the
                                number of lines processed. This is available as an <span class="emphasis"><strong>After</strong></span> variable.</p>
                            <p>Returns an integer. </p>
                            <p><span class="emphasis"><strong>Current iteration</strong></span>: Indicates the
                                current iteration number. This is available as a <span class="emphasis"><strong>Flow</strong></span> variable.</p>
                            <p>Returns an integer.</p>
                            <p>For further information about variables, see <span class="emphasis"><em>Talend Open Studio</em></span>
                                <span class="emphasis"><em>User Guide</em></span>.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Connections</strong></span></p>
                        </td><td><p>&nbsp;</p>
                        </td><td valign="top"><p>Outgoing links (from one component to
                                another):</p><p><span class="emphasis"><strong>Row</strong></span>: Iterate</p><p><span class="emphasis"><strong>Trigger</strong></span>: Run if; On Component Ok; On Component Error.</p><p> </p><p>Incoming links (from one component to another):</p><p><span class="emphasis"><strong>Row</strong></span>: Main; </p><p> </p><p>For further information regarding connections, see <span class="emphasis"><em>Talend Open Studio</em></span><span class="emphasis"><em> User
                                    Guide</em></span>.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top"><p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Transforming data flow to a list"><div class="titlepage"><div><div><h3 class="title"><a name="d0e261175"></a>Scenario: Transforming data flow to a list</h3></div></div></div><p>The following scenario describes a Job that reads a list of files from a defined input
            file, iterates on each of the files and displays their content row by row on the
                <span class="emphasis"><strong>Run </strong></span>console.</p><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e261183"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: two <span class="emphasis"><strong>tFileInputDelimited</strong></span> components, a <span class="emphasis"><strong>tFlowToIterate</strong></span>, and a <span class="emphasis"><strong>tLogRow</strong></span>.</p></li><li class="step" title="Step 2"><p>Connect the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> to
                            <span class="emphasis"><strong>tFlowToIterate</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> link,
                            <span class="emphasis"><strong>tFlowToIterate</strong></span> to the second <span class="emphasis"><strong>tFileInputDelimited</strong></span> using an <span class="emphasis"><strong>Iterate </strong></span>link, and the second <span class="emphasis"><strong>tFileInputDelimited</strong></span> to <span class="emphasis"><strong>tLogRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt;
                            <span class="emphasis"><strong>Main</strong></span> link.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate1.png"></div></li></ol></div></div><div class="section" title="Configuring the Components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e261241"></a>Configuring the Components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p></li><li class="step" title="Step 2"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to the
                            <span class="emphasis"><strong>File Name</strong></span> field to select the path to
                        the input file.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The <span class="emphasis"><strong>File Name</strong></span> field is
                            mandatory.</p></div><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate2.png"></div><p>The input file used in this scenario is
                        <span class="emphasis"><em>Customers.txt</em></span>. It is a text file that contains a list
                        of names of three other simple text files: <span class="emphasis"><em>Name.txt</em></span>,
                            <span class="emphasis"><em>E-mail.txt </em></span>and <span class="emphasis"><em>Address.txt</em></span>.
                        The first text file, <span class="emphasis"><em>Name.txt</em></span>, is made of one column
                        holding customers&#8217; names. The second text file,
                            <span class="emphasis"><em>E-mail.txt</em></span>, is made of one column holding
                        customers&#8217; e-mail addresses. The third text file,
                            <span class="emphasis"><em>Address.txt</em></span>, is made of one column holding
                        customers&#8217; postal addresses.</p><p>Fill in all other fields as needed. For more information, see <a class="xref" href="tFileInputDelimited.html#Raa86313-dup-2" title="tFileInputDelimited properties">the section called &#8220;tFileInputDelimited properties&#8221;</a>. In this scenario, the header and the footer
                        are not set and there is no limit for the number of processed rows.</p></li><li class="step" title="Step 3"><p>Click <span class="emphasis"><strong>Edit schema </strong></span>to describe the data
                        structure of this input file. In this scenario, the schema is made of one
                        column, <span class="emphasis"><em>FileName.</em></span></p><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate7.png"></div></li><li class="step" title="Step 4"><p>Double-click <span class="emphasis"><strong>tFlowToIterate</strong></span> to display
                        its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate3.png"></div><p>Click the plus button to add new parameter lines and define your
                        variables, and click in the <span class="emphasis"><strong>key</strong></span> cell to
                        enter the variable name as desired. In this scenario, one variable is
                        defined: <code class="code">"Name_of_File"</code>.</p><p>Alternatively, you can select the <span class="emphasis"><strong>Use the default
                            (key, value) in global variables</strong></span> check box to use the default
                        in global variables.</p></li><li class="step" title="Step 5"><p>Double-click the second <span class="emphasis"><strong>tFileInputDelimited</strong></span> to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate4.png"></div><p>In the <span class="emphasis"><strong>File name</strong></span> field, enter the
                        directory of the files to be read, and then press <span class="emphasis"><strong>Ctrl+Space</strong></span> to select the global variable <span class="emphasis"><em>"Name_of_File"</em></span>. In this scenario, the syntax is
                        as follows:</p><pre class="programlisting">"C:/scenario/flow_to_iterate/"+((String)globalMap.get("Name_of_File"))</pre><p>Click <span class="emphasis"><strong>Edit schema </strong></span>to define the schema
                        column name. In this scenario, it is <span class="emphasis"><em>RowContent</em></span>.</p><p>Fill in all other fields as needed. For more information, see <a class="xref" href="tFileInputDelimited.html#Raa86313-dup-2" title="tFileInputDelimited properties">the section called &#8220;tFileInputDelimited properties&#8221;</a>.</p></li><li class="step" title="Step 6"><p>In the design workspace, select the last component, <span class="emphasis"><strong>tLogRow</strong></span>, and click the <span class="emphasis"><strong>Component</strong></span> tab to define its basic settings.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate6.png"></div><p>Define your settings as needed. For more information, see <a class="xref" href="tLogRow.html#Raa83212" title="tLogRow properties">the section called &#8220;tLogRow properties&#8221;</a>.</p></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e261388"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Save your Job by pressing <span class="emphasis"><strong>Ctrl+S</strong></span>.</p></li><li class="step" title="Step 2"><p>Execute the Job by pressing <span class="emphasis"><strong>F6</strong></span> or
                        clicking <span class="emphasis"><strong>Run</strong></span> on the <span class="emphasis"><strong>Run</strong></span> tab.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowToIterate5.png"></div></li></ol></div><p>Customers&#8217; names, customers&#8217; e-mails, and customers&#8217; postal addresses appear on
                the console preceded by the schema column name.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-orchestration.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-orchestration.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tForeach.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;17.&nbsp;Orchestration components&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tForeach</td></tr></table></div></body></html>