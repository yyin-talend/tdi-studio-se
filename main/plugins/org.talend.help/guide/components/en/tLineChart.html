<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tLineChart</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-businessintelligence.html" title="Chapter&nbsp;3.&nbsp;Business Intelligence components"><link rel="prev" href="tJasperOutputExec.html" title="tJasperOutputExec"><link rel="next" href="tMondrianInput.html" title="tMondrianInput"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tLineChart</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tJasperOutputExec.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Business Intelligence components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tMondrianInput.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tLineChart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tLineChart"></a>tLineChart</h2></div></div></div><div class="mediaobject"><img src="../images/tLineChart_icon32_white.png"></div><div class="section" title="tLineChart properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e27937"></a>tLineChart properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>Business Intelligence/Charts</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tLineChart</strong></span> reads data from an
                                input flow and transforms the data into a line chart in a PNG image
                                file.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tLineChart</strong></span> generates a line chart
                                from the input data to ease technical analysis. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields to be processed and passed on to the next component. The
                                schema is either built-in or remotely stored in the Repository. </p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The schema of <span class="emphasis"><strong>tLineChart</strong></span>
                                    contains three read-only columns named <span class="emphasis"><strong>series</strong></span> (string), <span class="emphasis"><strong>x</strong></span> (integer), and <span class="emphasis"><strong>y</strong></span> (integer) respectively, in a fixed order. The
                                    data in any extra columns will be only passed to the next
                                    component, if any, without being presented in the generated line
                                    chart.</p></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Built-in</strong></span>: The schema is created
                                and stored locally for this component only. Related topic: see
                                        <span class="emphasis"><em>Talend Open Studio User Guide</em></span>. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Repository</strong></span>: The schema already
                                exists and is stored in the Repository, hence can be reused. Related
                                topic: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Sync columns</em></span></p>
                        </td><td valign="top">
                            <p>Click to synchronize the output file schema with the input file
                                schema. The Sync function only displays once the <span class="emphasis"><strong>Row</strong></span> connection is linked with the output
                                component.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Generated image path</em></span></p>
                        </td><td valign="top">
                            <p>Name and path of the output image file. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Chart title</em></span></p>
                        </td><td valign="top">
                            <p>Enter the title of the line chart to be generated.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Domain axis label</em></span> and <span class="emphasis"><em>Range axis
                                    label</em></span></p>
                        </td><td valign="top">
                            <p>Enter the domain axis (X axis) and range axis (Y axis)
                                labels.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Plot orientation</em></span></p>
                        </td><td valign="top">
                            <p>Select the plot orientation of the range axis: <span class="emphasis"><strong>Vertical</strong></span> or <span class="emphasis"><strong>Horizontal</strong></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Include legend</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box if you want your line chart to include a
                                legend, indicating the lines of different series in different
                                colors.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Image width</em></span> and <span class="emphasis"><em>Image
                                    height</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Enter the width and height of the image, in pixels.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Moving average</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to show a moving average for each series on
                                your line chart. With this check box selected, the <span class="emphasis"><strong>Period</strong></span> field appears, letting you define
                                a period of which you want to show the moving average.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Lower bound</em></span> and <span class="emphasis"><em>Upper
                                    bound</em></span></p>
                        </td><td valign="top">
                            <p>Define the lowest and highest values to be displayed on the range
                                axis. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Chart background</em></span> and <span class="emphasis"><em>Plot
                                    background</em></span></p>
                        </td><td valign="top">
                            <p>Select the chart background color and the plot area background
                                color.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>tStat</em></span><span class="emphasis"><em>Catcher
                                Statistics</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to collect log data at the component
                                level.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component is mainly used as Output component. It requires an
                                Input component and <span class="emphasis"><strong>Row</strong></span> main link
                                as input.</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Creating a line chart to ease trend analysis"><div class="titlepage"><div><div><h3 class="title"><a name="d0e28296"></a>Scenario: Creating a line chart to ease trend analysis</h3></div></div></div><p>This scenario describes a Job that reads data from a CSV file and transforms the data
            into a line chart to facilitate trend analysis. The input file records how long (in
            minutes) per week a person watches different TV channels over ten weeks, as shown
            below:</p><pre class="programlisting">Week;TV_A;TV_B;TV_C
1;327;286;244
2;326;285;243
3;325;283;245
4;323;282;246
5;322;285;248
6;321;288;247
7;322;291;245
8;321;292;244
9;320;293;243
10;319;294;242</pre><p>Because the input file has a different structure than required by the <span class="emphasis"><strong>tLineChart</strong></span> component, this use case uses the <span class="emphasis"><strong>tMap</strong></span> component  to adapt the source data to the three-column
            schema of <span class="emphasis"><strong>tLineChart</strong></span> so that a temporary CSV file can
            be created as the input to the <span class="emphasis"><strong>tLineChart</strong></span>
            component.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You will usually use the <span class="emphasis"><strong>tMap</strong></span> component to adjust
                the input schema in accordance with the schema structure of the <span class="emphasis"><strong>tLineChart</strong></span> component. For more information about how to
                use the <span class="emphasis"><strong>tMap</strong></span> component, see <span class="emphasis"><em>Talend Open Studio User
                    Guide</em></span> and <a class="xref" href="tMap.html" title="tMap">the section called &#8220;tMap&#8221;</a>.</p></div><p>To ensure correct generation of the temporary input file, a pre-treatment subjob is
            used to delete the temporary file in case it already exists before the main Job is
            executed; as this temporary file serves this specific Job only, a post-treatment subjob
            is used to deleted it after the main Job is executed.</p><div class="section" title="Dropping and linking components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28336"></a>Dropping and linking components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace: two <span class="emphasis"><strong>tFileDelete</strong></span> components, two <span class="emphasis"><strong>tFileInputDelimited</strong></span> components, a <span class="emphasis"><strong>tMap</strong></span>, three <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components, and a <span class="emphasis"><strong>tLineChart</strong></span>.</p></li><li class="step" title="Step 2"><p>Connect the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> to
                        the <span class="emphasis"><strong>tMap</strong></span> component using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
                        connection.</p></li><li class="step" title="Step 3"><p>Connect the <span class="emphasis"><strong>tMap</strong></span> component to the first
                            <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component using a
                            <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection, and name the connection <span class="emphasis"><em>TV_A</em></span>.</p></li><li class="step" title="Step 4"><p>Repeat the step above to connect the <span class="emphasis"><strong>tMap</strong></span>
                        component to the other two <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components using <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connections, and
                        name the connections <span class="emphasis"><em>TV_B</em></span> and <span class="emphasis"><em>TV_C</em></span> respectively.</p></li><li class="step" title="Step 5"><p>Connect the section <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        to the <span class="emphasis"><strong>tLineChart</strong></span> component using a
                            <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection. When questioned whether to get the schema
                        from the target component, click <span class="emphasis"><strong>Yes</strong></span>.</p></li><li class="step" title="Step 6"><p>Connect the first <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to the second <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component using a <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>On Subjob Ok</strong></span> connection.</p></li><li class="step" title="Step 7"><p>Connect the first <span class="emphasis"><strong>tFileDelete</strong></span> component
                        to the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> component,
                        and then the second <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to the second <span class="emphasis"><strong>tFileDelete</strong></span>
                        component, using <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>On Subjob Ok</strong></span> connections.</p></li><li class="step" title="Step 8"><p>Relabel the components to best describe their functionality.</p></li></ol></div><div class="mediaobject"><img src="../images/use_case_tlinechart02.png"></div></div><div class="section" title="Reading the source data"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28475"></a>Reading the source data</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> component, which is labelled <span class="emphasis"><em>Source_data</em></span>, to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tlinechart03.png"></div></li><li class="step" title="Step 2"><p>Fill in the <span class="emphasis"><strong>File name</strong></span> field by browsing
                        to the input file.</p></li><li class="step" title="Step 3"><p>Specify the header row. In this use case, the first row of the input file
                        is the header row. And leave the other parameters as they are.</p></li><li class="step" title="Step 4"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to describe the data
                        structure of the input file. In this use case, the input schema is made of
                        four columns: <span class="emphasis"><em>Week</em></span>, <span class="emphasis"><em>Mins_TVA</em></span>,
                            <span class="emphasis"><em>Mins_TVB</em></span>, and <span class="emphasis"><em>Mins_TVC</em></span>. Upon
                        defining the column names and data type, click <span class="emphasis"><strong>OK</strong></span> to close the schema dialog box.</p><div class="mediaobject"><img src="../images/use_case_tlinechart04.png"></div></li></ol></div></div><div class="section" title="Adapting the source data to the tLineChart schema"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28527"></a>Adapting the source data to the tLineChart schema</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tMap</strong></span> to open the
                            <span class="emphasis"><strong>Map Editor</strong></span>.</p><p>You can see an input table on the input panel, <span class="emphasis"><em>row1</em></span> in this example, and three empty output tables, named
                            <span class="emphasis"><em>TV_A</em></span>, <span class="emphasis"><em>TV_B</em></span>, and <span class="emphasis"><em>TV_C</em></span> on the
                        output panel.</p></li><li class="step" title="Step 2"><p>Use the <span class="emphasis"><strong>Schema editor</strong></span> to add three
                        columns to each output table: <span class="emphasis"><em>series</em></span> (string),
                            <span class="emphasis"><em>x</em></span> (integer), and <span class="emphasis"><em>y</em></span>
                        (integer).</p></li><li class="step" title="Step 3"><p>In the relevant <span class="emphasis"><strong>Expression</strong></span> field of the
                        output tables, enter the text to be presented in the legend area of the line
                        chart, <code class="code">TV A</code>, <code class="code">TV B</code>, and <code class="code">TV C</code>
                        respectively in this example. </p></li><li class="step" title="Step 4"><p>Drop the <span class="emphasis"><em>Week</em></span> column of the input table onto the
                            <span class="emphasis"><em>x</em></span> column of each output table. </p></li><li class="step" title="Step 5"><p>Drop the <span class="emphasis"><em>Mins_TVA</em></span> column of the input table onto the
                            <span class="emphasis"><em>y</em></span> column of the <span class="emphasis"><em>TV_A</em></span> table.
                    </p></li><li class="step" title="Step 6"><p>Drop the <span class="emphasis"><em>Mins_TVB</em></span> column of the input table onto the
                            <span class="emphasis"><em>y</em></span> column of the <span class="emphasis"><em>TV_B</em></span> table.
                    </p></li><li class="step" title="Step 7"><p>Drop the <span class="emphasis"><em>Mins_TVC</em></span> column of the input table onto the
                            <span class="emphasis"><em>y</em></span> column of the <span class="emphasis"><em>TV_C</em></span> table. </p><div class="mediaobject"><img src="../images/use_case_tlinechart05.png"></div></li><li class="step" title="Step 8"><p>Click <span class="emphasis"><strong>OK</strong></span> to save the mappings and close
                        the <span class="emphasis"><strong>Map Editor</strong></span> and propagate the output
                        schemas to the output components.</p></li></ol></div></div><div class="section" title="Generating the temporary input file"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28641"></a>Generating the temporary input file</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tlinechart06.png"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>File Name</strong></span> field, define a
                        temporary CSV file to send the mapped data flows to. In this use case, we
                        name this file <span class="emphasis"><em>Temp.csv</em></span>. This file will be used as the
                        input to the <span class="emphasis"><strong>tLineChart</strong></span> component.</p></li><li class="step" title="Step 3"><p>Select the <span class="emphasis"><strong>Append</strong></span> check box.</p></li><li class="step" title="Step 4"><p>Repeat the steps above to define the properties of the other two <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components, using exactly
                        the same settings as in the first <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that the order of output flows from the <span class="emphasis"><strong>tMap</strong></span> component is not necessarily the actual order of
                            writing data to the target file. To ensure the target file is correctly
                            generated, we need to delete the file by the same name if it already
                            exists before Job execution and select the <span class="emphasis"><strong>Append</strong></span> check box in all the <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components in this step.</p></div></li></ol></div></div><div class="section" title="Configuring line chart generation"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28696"></a>Configuring line chart generation</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the second <span class="emphasis"><strong>tFileInputDelimited</strong></span> component, which is labelled <span class="emphasis"><em>Temp_Input</em></span>, to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tlinechart07.png"></div></li><li class="step" title="Step 2"><p>Fill in the <span class="emphasis"><strong>File name</strong></span> field with the path
                        to the temporary input file generated by the <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components. In this use case, the
                        temporary input file to the <span class="emphasis"><strong>tLineChart</strong></span> is
                            <span class="emphasis"><em>Temp.csv</em></span>.</p></li><li class="step" title="Step 3"><p>Double-click the <span class="emphasis"><strong>tLineChart</strong></span> component to
                        display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tlinechart08.png"></div></li><li class="step" title="Step 4"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to open the schema
                        dialog box.</p><div class="mediaobject"><img src="../images/use_case_tlinechart09.png"></div></li><li class="step" title="Step 5"><p>Check that the input and output schemas are synchronized. If needed, copy
                        all the columns from the output schema to the input schema by clicking the
                        left-pointing double arrow button. Then, click <span class="emphasis"><strong>OK</strong></span> to close the schema dialog box.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Generated image path</strong></span> field, define
                        the path of the image file to be generated. </p></li><li class="step" title="Step 7"><p>In the <span class="emphasis"><strong>Chart title</strong></span> field, define a title
                        for the line chart. In this use case, enter <code class="code">Average Weekly Viewing
                            (per person)</code> as the chart title.</p></li><li class="step" title="Step 8"><p>Define the domain (X) and range (Y) axis labels. In this use case, enter
                            <code class="code">Week</code> and <code class="code">Minutes</code> respectively the axis
                        labels.</p></li><li class="step" title="Step 9"><p>Define the image size, the moving average period, the lower and upper
                        bounds, the chart background color, and the background color of the plot
                        area, as you prefer.</p><p> In this use case, we set the image size to <code class="code">450</code> by
                            <code class="code">450</code>, set the lower and upper bounds to <code class="code">210</code> and
                            <code class="code">340</code> respectively, select <span class="emphasis"><strong>light
                            gray</strong></span> as the chart background color, and keep the rest
                        settings are they are.</p></li></ol></div></div><div class="section" title="Deleting the temporary file"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28801"></a>Deleting the temporary file</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileDelete</strong></span>
                        component to display its Basic settings view.</p><div class="mediaobject" align="center"><img src="../images/use_case_tlinechart11.png" align="middle"></div></li><li class="step" title="Step 2"><p>Fill in the <span class="emphasis"><strong>File name</strong></span> field with the path
                        to the temporary input file, and clear the <span class="emphasis"><strong>Fail on
                            error</strong></span> check box to allow the main Job to be executed if the
                        file to delete does not exist. </p></li><li class="step" title="Step 3"><p>Specify the same file path in the other <span class="emphasis"><strong>tFileDelete</strong></span> component.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e28829"></a>Executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> to launch the Job. </p><p>A line chart is generated as defined, showing a graphical comparison of
                        the average weekly viewing time and the viewing trends of different TV
                        channels over the past ten weeks.</p><div class="mediaobject"><img src="../images/use_case_tlinechart10.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tJasperOutputExec.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-businessintelligence.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tMondrianInput.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tJasperOutputExec&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tMondrianInput</td></tr></table></div></body></html>